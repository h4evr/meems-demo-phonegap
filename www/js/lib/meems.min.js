/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(t,e){"function"==typeof define&&define.amd?define(e):t.Meems=e()})(this,function(){var t,e,i;return function(s){function n(t,e){return _.call(t,e)}function l(t,e){var i,s,n,l,o,r,a,u,h,c,m=e&&e.split("/"),d=g.map,p=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(m=m.slice(0,m.length-1),t=m.concat(t.split("/")),u=0;t.length>u;u+=1)if(c=t[u],"."===c)t.splice(u,1),u-=1;else if(".."===c){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((m||p)&&d){for(i=t.split("/"),u=i.length;u>0;u-=1){if(s=i.slice(0,u).join("/"),m)for(h=m.length;h>0;h-=1)if(n=d[m.slice(0,h).join("/")],n&&(n=n[s])){l=n,o=u;break}if(l)break;!r&&p&&p[s]&&(r=p[s],a=u)}!l&&r&&(l=r,o=a),l&&(i.splice(0,o,l),t=i.join("/"))}return t}function o(t,e){return function(){return d.apply(s,y.call(arguments,0).concat([t,e]))}}function r(t){return function(e){return l(e,t)}}function a(t){return function(e){$[t]=e}}function u(t){if(n(v,t)){var e=v[t];delete v[t],b[t]=!0,m.apply(s,e)}if(!n($,t)&&!n(b,t))throw Error("No "+t);return $[t]}function h(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function c(t){return function(){return g&&g.config&&g.config[t]||{}}}var m,d,p,f,$={},v={},g={},b={},_=Object.prototype.hasOwnProperty,y=[].slice;p=function(t,e){var i,s=h(t),n=s[0];return t=s[1],n&&(n=l(n,e),i=u(n)),n?t=i&&i.normalize?i.normalize(t,r(e)):l(t,e):(t=l(t,e),s=h(t),n=s[0],t=s[1],n&&(i=u(n))),{f:n?n+"!"+t:t,n:t,pr:n,p:i}},f={require:function(t){return o(t)},exports:function(t){var e=$[t];return e!==void 0?e:$[t]={}},module:function(t){return{id:t,uri:"",exports:$[t],config:c(t)}}},m=function(t,e,i,l){var r,h,c,m,d,g,_=[];if(l=l||t,"function"==typeof i){for(e=!e.length&&i.length?["require","exports","module"]:e,d=0;e.length>d;d+=1)if(m=p(e[d],l),h=m.f,"require"===h)_[d]=f.require(t);else if("exports"===h)_[d]=f.exports(t),g=!0;else if("module"===h)r=_[d]=f.module(t);else if(n($,h)||n(v,h)||n(b,h))_[d]=u(h);else{if(!m.p)throw Error(t+" missing "+h);m.p.load(m.n,o(l,!0),a(h),{}),_[d]=$[h]}c=i.apply($[t],_),t&&(r&&r.exports!==s&&r.exports!==$[t]?$[t]=r.exports:c===s&&g||($[t]=c))}else t&&($[t]=i)},t=e=d=function(t,e,i,n,l){return"string"==typeof t?f[t]?f[t](e):u(p(t,e).f):(t.splice||(g=t,e.splice?(t=e,e=i,i=null):t=s),e=e||function(){},"function"==typeof i&&(i=n,n=l),n?m(s,t,e,i):setTimeout(function(){m(s,t,e,i)},4),d)},d.config=function(t){return g=t,g.deps&&d(g.deps,g.callback),d},i=function(t,e,i){e.splice||(i=e,e=[]),n($,t)||n(v,t)||(v[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("../tools/almond",function(){}),i("observable",[],function(){function t(e){var i=function(t){var e=arguments.callee;if(void 0===t)return e.$currentVal;var i=e.$currentVal;return e.$currentVal=t,e.notify(i,t),this};return i.$currentVal=e,i.$observers=[],i.subscribe=t.prototype.subscribe,i.unsubscribe=t.prototype.unsubscribe,i.notify=t.prototype.notify,i}t.prototype.subscribe=function(t){return this.$observers.push(t),this},t.prototype.unsubscribe=function(t){return this.$observers.remove(t),this},t.prototype.notify=function(t,e){for(var i=0,s=this.$observers.length;s>i;++i)this.$observers[i].call(this,t,e);return this};var e=function(t){return function(){var e=this.$currentVal;t.apply(this.$currentVal,arguments),this.notify(e,this.$currentVal)}},i={indexOf:e(Array.prototype.indexOf),push:e(Array.prototype.push),pop:e(Array.prototype.pop),slice:e(Array.prototype.slice),splice:e(Array.prototype.splice),shift:e(Array.prototype.shift),unshift:e(Array.prototype.unshift),reverse:e(Array.prototype.reverse),sort:e(Array.prototype.sort),remove:function(t){var e=this.$currentVal.indexOf(t);e>-1&&this.$currentVal.splice(e,1)},removeAll:function(t){var e,i,s,n,l;for(e=0,i=t.length;i>e;++e)for(l=t[e],s=0,n=this.$currentVal.length;n>s;++s)this.$currentVal[s]===l&&(this.$currentVal.splice(s,1),--s,--n)}},s={observable:function(e){return new t(e)},observableArray:function(t){var e=s.observable(t||[]);for(var n in i)e[n]=i[n];return e}};return s}),i("meems-utils",[],function(){var t=document.head||document.getElementsByTagName("head")[0],e="ontouchstart"in window,i={},s={},n=0,l={},o={Fn:{extend:function(t,e,i){"function"==typeof t&&(t.prototype=new e,t.constructor=t,t=t.prototype);for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},postPone:function(t){setTimeout(t,10)},bind:function(t,e){return function(){t.apply(e,arguments)}},throttle:function(t,e){var i,s;return function(){if(s=(new Date).getTime(),!i||s-i>e){var n=t.apply(this,arguments);return i=s,n}}}},Array:{indexOfByProp:function(t,e,i){for(var s=0;t.length>s;++s)if(t[s][e]===i)return s;return-1},remove:function(t,e){for(var i=0,s=t.length;s>i;++i)if(t[i]===e)return t.splice(i,0),void 0},moveElement:function(t,e,i){var s,n;if(e=parseInt(e,10),i=parseInt(i,10),e!==i&&e>=0&&t.length>=e&&i>=0&&t.length>=i){if(n=t[e],i>e)for(s=e;i>s;s++)t[s]=t[s+1];else for(s=e;s>i;s--)t[s]=t[s-1];t[i]=n}}},Map:{getKeys:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}},Dom:{getClass:function(t){return t.$meems_uid?t.$meems_uid in i&&i[t.$meems_uid]||(i[t.$meems_uid]=t.className):(t.$meems_uid=++n,l[t.$meems_uid]=t,i[t.$meems_uid]=t.className),i[t.$meems_uid]},addClass:function(t,e){var s=this.getClass(t);i[t.$meems_uid]=s.replace(RegExp("\\b"+e+"\\b"),"")+" "+e},removeClass:function(t,e){var s=this.getClass(t);i[t.$meems_uid]=s.replace(RegExp("\\b"+e+"\\b"),"")},setClass:function(t,e){t.$meems_uid||(t.$meems_uid=++n,l[t.$meems_uid]=t),i[t.$meems_uid]=e},setHtml:function(t,e){t.$meems_uid||(t.$meems_uid=++n,l[t.$meems_uid]=t),s[t.$meems_uid]=e},applyChanges:function(){var t,e,n;for(n in i)i.hasOwnProperty(n)&&(t=i[n],t&&(l[n].className=t));for(n in s)s.hasOwnProperty(n)&&(e=s[n],e&&(l[n].innerHTML=e));i={},s={}},fixedViewport:function(){var e=document.createElement("meta");e.setAttribute("name","viewport"),e.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1"),t.appendChild(e)},supportsTouch:function(){return e},getPosition:function(t){var e=t,i={x:0,y:0};do i.x+=e.offsetLeft,i.y+=e.offsetTop;while(e=e.offsetParent);return i},getAbsolutePosition:function(t){for(var e=t,i={x:0,y:0};e&&"absolute"!==e.style.position;){i.x+=e.offsetLeft,i.y+=e.offsetTop,e=e.offsetParent;break}return i},getDimensions:function(t){var e=window.getComputedStyle(t,null);return{width:parseFloat(e.getPropertyValue("width")),height:parseFloat(e.getPropertyValue("height"))}}}};return void 0===Function.prototype.extend&&(Function.prototype.extend=function(t,e){o.Fn.extend(this,t,e)}),o}),i("meems-events",[],function(){function t(){return this.$handlers={},this}var e,i,s,n;"ontouchstart"in window?(e="touchstart",s="touchmove",i="touchend",n=function(t){return{x:t.touches[0].pageX,y:t.touches[0].pageY}}):(e="mousedown",s="mousemove",i="mouseup",n=function(t){return{x:t.pageX,y:t.pageY}});var l=function(){function t(t,e,i){t.addEventListener(e,i,!0)}function e(t,e,i){t.attachEvent("on"+e,i)}function i(t,e,i){t["on"+e]=i}function s(t,e,i){t.removeEventListener(e,i,!0)}function n(t,e,i){t.detachEvent("on"+e,i)}function l(t,e){t["on"+e]=null}var o="addEventListener"in window,r="attachEvent"in window;return{on:o?t:r?e:i,off:o?s:r?n:l,cancelEvent:function(t){return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1}}}();t.prototype={on:function(t,e){return this.$handlers[t]=this.$handlers[t]||[],this.$handlers[t].push(e),this},off:function(t,e){return void 0!==this.$handlers[t]&&(this.$handlers[t]=this.$handlers[t].filter(function(t){return t!==e})),this},fire:function(t){for(var e=this.$handlers[t]||[],i=0;e.length>i;++i)e[i].apply(this,arguments);return this}};var o={Dom:l,Handler:t,Touch:{touchStartEventName:e,touchEndEventName:i,touchMoveEventName:s,getCursorPosition:n}};return o}),i("ui/widget",["meems-utils","meems-events"],function(t,e){function i(){return this.$el=null,this.$parent=null,this.$facets={},this.$attributes={},this.$eventHandlers=null,e.Handler.apply(this,arguments),this}return i.extend(e.Handler,{on:function(t,i){return 0===t.indexOf("dom:")?this.$el?e.Dom.on(this.el(),t.substr(4),function(){Array.prototype.unshift.call(arguments,t),i.apply(this,arguments)}):(this.$eventHandlers=this.$eventHandlers||[],this.$eventHandlers.push([t,i])):e.Handler.prototype.on.apply(this,arguments),this},off:function(t,i){return 0===t.indexOf("dom:")?e.Dom.off(this.el(),t.substr(4),i):e.Handler.prototype.off.apply(this,arguments),this},fire:function(){for(var t=this;t;)e.Handler.prototype.fire.apply(t,arguments),t=t.parent();return this},el:function(t){if(void 0===t)return this.$el;if(this.$el=t,this.$el&&this.$eventHandlers){for(var e,i=0,s=this.$eventHandlers.length;s>i;++i)e=this.$eventHandlers[i],this.on(e[0],e[1]);this.$eventHandlers=null}return this},facets:function(){return t.Map.getKeys(this.$facets)},parent:function(t){return void 0===t?this.$parent:(this.$parent=t,this)},facet:function(t,e){return void 0===e?this.$facets[t]:(this.$el&&this.$facets[t]&&this.$facets[t].el()&&this.$facets[t].el().parentNode===this.$el&&this.$el.removeChild(this.$facets[t].el()),this.$facets[t]=e,this)},attr:function(e,i){if(void 0===i){var s=this.$attributes[e];return"function"==typeof s?s():s}return this.$attributes[e]=i,i&&void 0!==i.subscribe&&"function"==typeof i.subscribe&&i.subscribe(function(e,i){return t.Fn.bind(function(t,i){this.partialUpdate(e,t,i)},i)}(e,this)),this},partialUpdate:function(){this.update()},update:function(){this.el()&&this.$attributes.customClass&&(t.Dom.addClass(this.el(),this.$attributes.customClass),this.$attributes.customClass=null)}}),i}),i("ui/header",["meems-utils","./widget"],function(t,e){function i(){return e.apply(this,arguments),this.facet("buttonsleft",null),this.facet("buttonsright",null),this.$titleEl=null,this}return i.extend(e,{partialUpdate:function(e,i,s){"title"===e&&this.$titleEl&&t.Dom.setHtml(this.$titleEl,"<h1>"+(s||"")+"</h1>")},update:function(i){this.el()||(this.el(document.createElement("div")),this.el().className="ui-header",this.$titleEl=document.createElement("div"),this.$titleEl.className="ui-title",this.el().appendChild(this.$titleEl)),t.Dom.setHtml(this.$titleEl,"<h1>"+(this.attr("title")||"")+"</h1>"),this.facet("buttonsleft")&&(this.facet("buttonsleft").update(i),this.facet("buttonsleft").el().parentNode!==this.el()&&(t.Dom.addClass(this.facet("buttonsleft").el(),"ui-buttons-left"),this.el().insertBefore(this.facet("buttonsleft").el(),this.$titleEl))),this.facet("buttonsright")&&(this.facet("buttonsright").update(i),this.facet("buttonsright").el().parentNode!==this.el()&&(t.Dom.addClass(this.facet("buttonsright").el(),"ui-buttons-right"),this.el().appendChild(this.facet("buttonsright").el()))),e.prototype.update.apply(this,arguments)}}),i}),i("ui/footer",["meems-utils","./widget"],function(t,e){function i(){return e.apply(this,arguments),this.facet("buttons",null),this}return i.extend(e,{update:function(i){this.el()||(this.el(document.createElement("div")),t.Dom.addClass(this.el(),"ui-footer")),this.facet("buttons")&&(this.facet("buttons").update(i),this.facet("buttons").el().parentNode!==this.el()&&(t.Dom.addClass(this.facet("buttons").el(),"ui-buttons"),this.el().appendChild(this.facet("buttons").el()))),e.prototype.update.apply(this,arguments)}}),i}),i("meems-scroll",["meems-utils","meems-events"],function(t,e){function i(t,i){i.disableTouchEvents||(e.Dom.on(t,e.Touch.touchStartEventName,a),e.Dom.on(t,e.Touch.touchMoveEventName,h),e.Dom.on(t,e.Touch.touchEndEventName,c)),t.$meems_scroll=!0,t.$meems_config=i,t.style.overflow="hidden",t.$meems_content.style.position="absolute"}function s(t,i){delete t.$meems_scroll,delete t.$meems_config,i.disableTouchEvents||(e.Dom.off(t,e.Touch.touchStartEventName,a),e.Dom.off(t,e.Touch.touchMoveEventName,h),e.Dom.off(t,e.Touch.touchEndEventName,c))}function n(t){var e=t.target;if(e.className.indexOf("meems-scroll-skip")>-1)return null;for(;void 0===e.$meems_scroll&&e.parentNode;)e=e.parentNode;return e}function l(t,e,i,s,n,l,o){var r=e-i,a=r/n,u=Math.abs(a/t.friction),h=s-a*u;t.paging?(h>s+l?h=s+l:s-l>h&&(h=s-l),h=Math.round(h/l)*l):t.snap&&t.snap>0&&(h=Math.round(h/t.snap)*t.snap);var c=h;return l>o?0>c&&(c=0):-o+l>c&&(c=-o+l),c>0&&(c=0),h!==c&&(u*=Math.abs((e-c)/(e-h)),h=c),u>t.totalMaxTime&&(u=t.totalMaxTime),[h,u]}function o(){y=!0}function r(){y=!1}function a(t){var i=n(t);if(!i)return!0;var s=i.$meems_content;return i.$meems_content_size=D(s),i.$meems_old_pos={x:i.$meems_content_size.left,y:i.$meems_content_size.top},s.style[b]="",i.$meems_dragging=!0,i.$meems_dragging_start=(new Date).getTime(),i.$meems_cursor_pos=e.Touch.getCursorPosition(t),i.$meems_cursor_last_pos=i.$meems_cursor_pos,i.$meems_scrolling_running_animation=!1,i.$meems_drag_distance=0,i.$meems_effective_drag_distance=0,i.$meems_locked_axis=void 0,++_,!0}function u(i){if(y){var s=n(i);if(s){var o=s.$meems_content;s.$meems_content_size=D(o);var r=e.Touch.getCursorPosition(i),a=s.$meems_config,u=t.Dom.getPosition(s),h=s.$meems$elm_size.height,c=s.$meems_content_size.height;if(a.scrollY){var d=0;if(100>=r.y-u.y?d=50:100>=u.y+h-r.y&&(d=-50),0!==d){var p=l({paging:!1,snap:!1,totalMaxTime:.5,friction:a.friction},0,d,s.$meems_content_size.top,.5,h,c),f=p[0],$=p[1];m(s,null,null,f,$)}}}}}function h(t){if(!y||0>=_)return u(t),!0;var i=n(t);if(!i||!i.$meems_dragging)return u(t),!0;var s=i.$meems_config,l=e.Touch.getCursorPosition(t),o=i.$meems_cursor_pos.x-l.x,r=i.$meems_cursor_pos.y-l.y;if(s.minDistanceOfDrag>i.$meems_drag_distance)return i.$meems_drag_distance+=o*o+r*r,t.preventDefault&&t.preventDefault(),!0;s.axisLock&&void 0===i.$meems_locked_axis&&(i.$meems_locked_axis=o*o>r*r?"x":"y");var a,h,c=i.$meems_content;return!s.scrollX||"x"!==i.$meems_locked_axis&&void 0!==i.$meems_locked_axis||(a=i.$meems_old_pos.x-o,s.bouncing||(a>0?a=0:-i.$meems_content_size.width+i.$meems$elm_size.width>a&&(a=-i.$meems_content_size.width+i.$meems$elm_size.width)),i.$meems_effective_drag_distance+=o*o,s.hideScroller||(i.$meems_scrollbar_x.style.display="block")),!s.scrollY||"y"!==i.$meems_locked_axis&&void 0!==i.$meems_locked_axis||(h=i.$meems_old_pos.y-r,s.bouncing||(h>0?h=0:-i.$meems_content_size.height+i.$meems$elm_size.height>h&&(h=-i.$meems_content_size.height+i.$meems$elm_size.height)),i.$meems_effective_drag_distance+=r*r,s.hideScroller||(i.$meems_scrollbar_y.style.display="block")),C(i,a,h),i.$meems_cursor_last_pos=l,$(i,c),t.preventDefault&&t.preventDefault(),!0}function c(t){y=!1;var e=n(t);if(!e||!e.$meems_dragging)return!0;--_,e.$meems_dragging=!1;var i=e.$meems_config;if(i.minDistanceOfDrag>e.$meems_effective_drag_distance)return!0;var s,o,r,a,u,h,c=e.$meems_cursor_last_pos,d=((new Date).getTime()-e.$meems_dragging_start)/1e3;if(i.scrollY){var p=e.$meems$elm_size.height,f=e.$meems_content_size.height;s=l(i,e.$meems_cursor_pos.y,c.y,e.$meems_old_pos.y,d,p,f),o=s[0],r=s[1],s=null}if(i.scrollX){var $=e.$meems$elm_size.width,v=e.$meems_content_size.width;a=l(i,e.$meems_cursor_pos.x,c.x,e.$meems_old_pos.x,d,$,v),u=a[0],h=a[1],a=null}return m(e,u,h,o,r),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),void 0!==t.cancelBubble&&(t.cancelBubble=!0),!1}function m(e,i,s,n,l){var o=e.$meems_config,r=e.$meems_content,a="";o.scrollY&&(a="top "+l+"s "+o.timingFunction),o.scrollX&&(o.scrollY&&(a+=", "),a+="left "+s+"s "+o.timingFunction),a.length>0&&(r.style[b]=a,window.requestAnimationFrame(function(){var o=0;void 0!==n&&(o=Math.max(o,l)),void 0!==i&&(o=Math.max(o,s)),C(e,i,n),o>0&&(f(e,o),t.Fn.postPone(function(){e.$meems_handler.fire("scroll:end",-(i||0),-(n||0))}))}))}function d(t,e){e.hideScroller||(t.$meems_scrollbar_y=document.createElement("div"),t.$meems_scrollbar_y.className="ui-scroll-bar-y",t.$meems_scrollbar_y.style.position="absolute",t.appendChild(t.$meems_scrollbar_y))}function p(t,e){e.hideScroller||(t.$meems_scrollbar_x=document.createElement("div"),t.$meems_scrollbar_x.className="ui-scroll-bar-x",t.$meems_scrollbar_x.style.position="absolute",t.appendChild(t.$meems_scrollbar_x))}function f(t,e){function i(){var e=(new Date).getTime();o-=r*(e-n),u&&(u.style.opacity=o),h&&(h.style.opacity=o),t.$meems_scrolling_running_animation&&d>e-m?(n=e,window.requestAnimationFrame(i)):(u&&(u.style.display="none",u.style.opacity=l),h&&(h.style.display="none",h.style.opacity=l),t.$meems_scrolling_running_animation=!1)}function s(){var e=(new Date).getTime();$(t,a),t.$meems_scrolling_running_animation&&c>e-m?window.requestAnimationFrame(s):(l=u&&document.defaultView.getComputedStyle(u,null).opacity||h&&document.defaultView.getComputedStyle(h,null).opacity||1,o=l,r=l/d,n=m=(new Date).getTime(),window.requestAnimationFrame(i))}var n,l,o,r,a=t.$meems_content,u=t.$meems_scrollbar_x,h=t.$meems_scrollbar_y,c=1e3*e,m=(new Date).getTime(),d=1e3*t.$meems_config.fadeOutDuration;t.$meems_scrolling_running_animation=!0,window.requestAnimationFrame(s)}function $(t,e){var i=t.$meems_config;if(!i.hideScroller){if(i.scrollY){var s=t.$meems_scrollbar_y,n=t.$meems$elm_size.height,l=t.$meems_content_size.height,o=Math.min(n,l)/l*n,r=-e.offsetTop/l*n;s.style.top=r+"px",s.style.height=o+"px"}if(i.scrollX){var a=t.$meems_scrollbar_x,u=t.$meems$elm_size.width,h=t.$meems_content_size.width,c=Math.min(u,h)/h*u,m=-e.offsetLeft/h*u;a.style.left=m+"px",a.style.width=c+"px"}}}function v(t,s){return e.Handler.apply(this,arguments),s=s||{},s.friction=s.friction||100,s.totalMaxTime=s.totalMaxTime||1,s.totalMaxTimesnap=s.totalMaxTimesnap||0,s.paging=s.paging===!0,s.snap=s.snap===!0,s.scrollY=s.scrollY!==!1,s.scrollX=s.scrollX===!0,s.timingFunction=s.timingFunction||"ease-out",s.fadeOutDuration=s.fadeOutDuration||1,s.bouncing=s.bouncing!==!1,s.minDistanceOfDrag=s.minDistanceOfDrag||10,s.axisLock=s.axisLock!==!1,s.disableTouchEvents=s.disableTouchEvents===!0,s.hideScroller=s.hideScroller===!0,t.$meems_content=t.children[0],i(t,s),s.scrollY&&d(t,s),s.scrollX&&p(t,s),this.$elm=t,this.$elm.$meems_handler=this,this.$elm.$meems$elm_size=D(this.$elm),this.$elm.$meems_content_size=D(this.$elm.$meems_content),g.push(this),this}var g=[],b=function(){for(var t=document.body||document.documentElement,e=["transition","MozTransition","WebkitTransition","OTransition"],i=0;e.length>i;++i)if(e[i]in t.style)return e[i];return"transition"}();(function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;e.length>i&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),s=Math.max(0,16-(i-t)),n=window.setTimeout(function(){e(i+s)},s);return t=i+s,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})();var _=0,y=!1,C=function(t,e,i){"number"==typeof e&&(t.$meems_content.style.left=e+"px",t.$meems_content_size.left=e),"number"==typeof i&&(t.$meems_content.style.top=i+"px",t.$meems_content_size.top=i)},D=function(t){return{left:t.offsetLeft,top:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}};return v.updateAll=function(){for(var t,e=0,i=g.length;i>e;++e)t=g[e],t.update()},v.extend(e.Handler,{update:function(){this.$elm.$meems$elm_size=D(this.$elm),this.$elm.$meems_content_size=D(this.$elm.$meems_content),$(this.$elm,this.$elm.$meems_content)},destroy:function(){g.splice(g.indexOf(this),0),s(this.$elm,this.$meems_config)},scrollTo:function(t,e,i){i=i||.25,this.$elm.$meems_config.hideScroller||(this.$elm.$meems_config.scrollY&&(this.$elm.$meems_scrollbar_y.style.display="block"),this.$elm.$meems_config.scrollX&&(this.$elm.$meems_scrollbar_x.style.display="block")),m(this.$elm,-t,i,-e,i)}}),e.Dom.on(document,e.Touch.touchStartEventName,o),e.Dom.on(document,e.Touch.touchEndEventName,r),v}),i("ui/page",["meems-utils","meems-scroll","./widget"],function(t,e,i){function s(){return i.apply(this,arguments),this.facet("header",null),this.facet("content",null),this.facet("footer",null),this.attr("enableScroll",!1),this.$contentWrapper=null,this.$scroller=null,this}return s.extend(i,{scroller:function(){return this.$scroller},update:function(s){this.el()||(this.el(document.createElement("div")),this.el().className="ui-page"),this.facet("header")&&(this.facet("header").update(s),this.facet("header").el().parentNode!==this.el()&&this.el().appendChild(this.facet("header").el())),this.facet("content")&&(this.facet("content").update(s),this.facet("content").el().parentNode&&this.facet("content").el().parentNode===this.$contentWrapper||(this.$contentWrapper=document.createElement("div"),this.$contentWrapper.className="ui-content",this.$contentWrapper.appendChild(this.facet("content").el()),this.el().appendChild(this.$contentWrapper))),this.facet("footer")&&(this.facet("footer").update(s),this.facet("footer").el().parentNode!==this.el()&&this.el().appendChild(this.facet("footer").el())),this.facet("content")&&(this.facet("header")?t.Dom.removeClass(this.$contentWrapper,"ui-header-off"):t.Dom.addClass(this.$contentWrapper,"ui-header-off"),this.facet("footer")?t.Dom.removeClass(this.$contentWrapper,"ui-footer-off"):t.Dom.addClass(this.$contentWrapper,"ui-footer-off")),this.attr("enableScroll")!==!0||this.$scroller||(this.$scroller=new e(this.$contentWrapper,{scrollX:!1,scrollY:!0,disableTouchEvents:!1,hideScroller:!1})),i.prototype.update.apply(this,arguments)}}),s}),function(t,e){"object"==typeof exports&&exports?module.exports=e:"function"==typeof i&&i.amd?i("mustache",e):t.Mustache=e}(this,function(){function t(t,e){return RegExp.prototype.test.call(t,e)}function e(e){return!t(p,e)}function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(t){return(t+"").replace(/[&<>"'\/]/g,function(t){return b[t]})}function n(t){this.string=t,this.tail=t,this.pos=0}function l(t,e){this.view=t,this.parent=e,this.clearCache()}function o(){this.clearCache()}function r(t){function e(t,e,s){if(!i[t]){var n=r(e);i[t]=function(t,e){return n(t,e,s)}}return i[t]}var i={};return function(i,s,n){for(var l,o,r="",a=0,u=t.length;u>a;++a)switch(l=t[a],l[0]){case"#":o=n.slice(l[3],l[5]),r+=i._section(l[1],s,o,e(a,l[4],n));break;case"^":r+=i._inverted(l[1],s,e(a,l[4],n));break;case">":r+=i._partial(l[1],s);break;case"&":r+=i._name(l[1],s);break;case"name":r+=i._escaped(l[1],s);break;case"text":r+=l[1]}return r}}function a(t){for(var e,i=[],s=i,n=[],l=0,o=t.length;o>l;++l)switch(e=t[l],e[0]){case"#":case"^":n.push(e),s.push(e),s=e[4]=[];break;case"/":var r=n.pop();r[5]=e[2],s=n.length>0?n[n.length-1][4]:i;break;default:s.push(e)}return i}function u(t){for(var e,i,s=[],n=0,l=t.length;l>n;++n)e=t[n],"text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(i=e,s.push(e));return s}function h(t){return[RegExp(i(t[0])+"\\s*"),RegExp("\\s*"+i(t[1]))]}var c={};c.name="mustache.js",c.version="0.7.2",c.tags=["{{","}}"],c.Scanner=n,c.Context=l,c.Writer=o;var m=/\s*/,d=/\s+/,p=/\S/,f=/\s*=/,$=/\s*\}/,v=/#|\^|\/|>|\{|&|=|!/,g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};c.escape=s,n.prototype.eos=function(){return""===this.tail},n.prototype.scan=function(t){var e=this.tail.match(t);return e&&0===e.index?(this.tail=this.tail.substring(e[0].length),this.pos+=e[0].length,e[0]):""},n.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i),this.pos+=i}return e},l.make=function(t){return t instanceof l?t:new l(t)},l.prototype.clearCache=function(){this._cache={}},l.prototype.push=function(t){return new l(t,this)},l.prototype.lookup=function(t){var e=this._cache[t];if(!e){if("."===t)e=this.view;else for(var i=this;i;){if(t.indexOf(".")>0){var s=t.split("."),n=0;for(e=i.view;e&&s.length>n;)e=e[s[n++]]}else e=i.view[t];if(null!=e)break;i=i.parent}this._cache[t]=e}return"function"==typeof e&&(e=e.call(this.view)),e},o.prototype.clearCache=function(){this._cache={},this._partialCache={}},o.prototype.compile=function(t,e){var i=this._cache[t];if(!i){var s=c.parse(t,e);i=this._cache[t]=this.compileTokens(s,t)}return i},o.prototype.compilePartial=function(t,e,i){var s=this.compile(e,i);return this._partialCache[t]=s,s},o.prototype.compileTokens=function(t,e){var i=r(t),s=this;return function(t,n){if(n)if("function"==typeof n)s._loadPartial=n;else for(var o in n)s.compilePartial(o,n[o]);return i(s,l.make(t),e)}},o.prototype.render=function(t,e,i){return this.compile(t)(e,i)},o.prototype._section=function(t,e,i,s){var n=e.lookup(t);switch(typeof n){case"object":if(g(n)){for(var l="",o=0,r=n.length;r>o;++o)l+=s(this,e.push(n[o]));return l}return n?s(this,e.push(n)):"";case"function":var a=this,u=function(t){return a.render(t,e)},h=n.call(e.view,i,u);return null!=h?h:"";default:if(n)return s(this,e)}return""},o.prototype._inverted=function(t,e,i){var s=e.lookup(t);return!s||g(s)&&0===s.length?i(this,e):""},o.prototype._partial=function(t,e){t in this._partialCache||!this._loadPartial||this.compilePartial(t,this._loadPartial(t));var i=this._partialCache[t];return i?i(e):""},o.prototype._name=function(t,e){var i=e.lookup(t);return"function"==typeof i&&(i=i.call(e.view)),null==i?"":i+""},o.prototype._escaped=function(t,e){return c.escape(this._name(t,e))},c.parse=function(t,s){function l(){if(E&&!w)for(;D.length;)C.splice(D.pop(),1);else D=[];E=!1,w=!1}if(t=t||"",s=s||c.tags,"string"==typeof s&&(s=s.split(d)),2!==s.length)throw Error("Invalid tags: "+s.join(", "));for(var o,r,p,g,b=h(s),_=new n(t),y=[],C=[],D=[],E=!1,w=!1;!_.eos();){if(o=_.pos,p=_.scanUntil(b[0]))for(var x=0,N=p.length;N>x;++x)g=p.charAt(x),e(g)?D.push(C.length):w=!0,C.push(["text",g,o,o+1]),o+=1,"\n"===g&&l();if(o=_.pos,!_.scan(b[0]))break;if(E=!0,r=_.scan(v)||"name",_.scan(m),"="===r)p=_.scanUntil(f),_.scan(f),_.scanUntil(b[1]);else if("{"===r){var T=RegExp("\\s*"+i("}"+s[1]));p=_.scanUntil(T),_.scan($),_.scanUntil(b[1]),r="&"}else p=_.scanUntil(b[1]);if(!_.scan(b[1]))throw Error("Unclosed tag at "+_.pos);if("/"===r){if(0===y.length)throw Error('Unopened section "'+p+'" at '+o);var P=y.pop();if(P[1]!==p)throw Error('Unclosed section "'+P[1]+'" at '+o)}var F=[r,p,o,_.pos];if(C.push(F),"#"===r||"^"===r)y.push(F);else if("name"===r||"{"===r||"&"===r)w=!0;else if("="===r){if(s=p.split(d),2!==s.length)throw Error("Invalid tags at "+o+": "+s.join(", "));b=h(s)}}var P=y.pop();if(P)throw Error('Unclosed section "'+P[1]+'" at '+_.pos);return a(u(C))};var _=new o;return c.clearCache=function(){return _.clearCache()},c.compile=function(t,e){return _.compile(t,e)},c.compilePartial=function(t,e,i){return _.compilePartial(t,e,i)},c.compileTokens=function(t,e){return _.compileTokens(t,e)},c.render=function(t,e,i){return _.render(t,e,i)},c.to_html=function(t,e,i,s){var n=c.render(t,e,i);return"function"!=typeof s?n:(s(n),void 0)},c}()),i("ui/html",["meems-utils","./widget","mustache"],function(t,e,i){function s(){return this._compiledTemplate=i.compile(""),e.apply(this,arguments),this}return s.extend(e,{attr:function(t,s){return void 0!==s&&"html"===t&&(this._compiledTemplate=i.compile(s||"")),e.prototype.attr.apply(this,arguments)},partialUpdate:function(e){"html"!==e&&"data"!==e||!this.el()||t.Dom.setHtml(this.el(),this._compiledTemplate(this.attr("data")))},update:function(){this.el()||(this.el(document.createElement("div")),t.Dom.addClass(this.el(),"ui-html")),t.Dom.setHtml(this.el(),this._compiledTemplate(this.attr("data"))),e.prototype.update.apply(this,arguments)}}),s}),i("ui/button",["meems-utils","./widget"],function(t,e){function i(){return e.apply(this,arguments),this.$iconEl=null,this.$titleEl=null,this}return i.extend(e,{attr:function(i,s){var n="style"===i?e.prototype.attr.call(this,i):null,l=e.prototype.attr.apply(this,arguments);return"style"===i&&void 0!==s&&this.el()&&(n?t.Dom.removeClass(this.el(),"ui-button-"+n):t.Dom.removeClass(this.el(),"ui-button-normal"),s?t.Dom.addClass(this.el(),"ui-button-"+s):t.Dom.addClass(this.el(),"ui-button-normal")),l},partialUpdate:function(e,i,s){"title"===e&&this.$titleEl?(t.Dom.setHtml(this.$titleEl,this.attr("title")),t.Dom.applyChanges()):"style"===e&&this.el()&&(i?t.Dom.removeClass(this.el(),"ui-button-"+i):t.Dom.removeClass(this.el(),"ui-button-normal"),s?t.Dom.addClass(this.el(),"ui-button-"+s):t.Dom.addClass(this.el(),"ui-button-normal"))},update:function(){this.el()||(this.el(document.createElement("div")),this.$iconEl=document.createElement("div"),this.$iconEl.className="ui-icon",this.el().appendChild(this.$iconEl),this.$titleEl=document.createElement("div"),this.$titleEl.className="ui-title",this.el().appendChild(this.$titleEl),t.Dom.addClass(this.el(),"ui-button")),t.Dom.setClass(this.$iconEl,(this.attr("icon")?"ui-icon ui-icon-"+this.attr("icon"):"ui-no-icon")+(this.attr("disabled")===!0?" ui-disabled":"")),t.Dom.setHtml(this.$titleEl,this.attr("title")),this.attr("style",void 0!==this.attr("style")?this.attr("style"):null),e.prototype.update.apply(this,arguments)}}),i}),i("ui/button_group",["meems-utils","./widget"],function(t,e){function i(){return e.apply(this,arguments),this.$buttons=[],this}var s=function(e,i){for(var s=i.target;s&&(s.className&&-1===s.className.indexOf("ui-button")||!s.className);)s=s.parentNode;if(s){var n=t.Array.indexOfByProp(this.$buttons,"$el",s);n>-1&&this.fire("button:pressed",this.$buttons[n])}},n=function(e){if(this.el())for(var i,n=this.attr("stretch")===!0,l=this.$buttons.length>0?100/this.$buttons.length:0,o=void 0!==this.attr("selected")?this.attr("selected"):-1,r=0;this.$buttons.length>r;++r)i=this.$buttons[r],i.update(e),i.el().parentNode!==this.el()&&(this.el().appendChild(i.el()),i.on("dom:"+(t.Dom.supportsTouch()?"touchstart":"click"),t.Fn.bind(s,this))),i.el().style.width=n?l+"%":"",o===r?t.Dom.addClass(i.el(),"ui-selected"):t.Dom.removeClass(i.el(),"ui-selected")};return i.extend(e,{addButton:function(t){return this.$buttons.push(t),this},buttons:function(t){if(void 0===t)return this.$buttons;if(this.$buttons&&this.$buttons.length>0){var e,i;for(i=0;this.$buttons.length>i;++i)e=this.$buttons[i],e.el()&&e.el().parentNode===this.el()&&this.el().removeChild(e.el())}return this.$buttons=t,n.call(this),this},update:function(i){this.el()||(this.el(document.createElement("div")),t.Dom.addClass(this.el(),"ui-button-group")),n.call(this,i),e.prototype.update.apply(this,arguments)}}),i}),i("ui/list",["meems-utils","meems-events","./widget","./html"],function(t,e,i,s){function n(){return i.apply(this,arguments),this.$header=!1,this.$table=null,this.$leftFacet=null,this.$rightFacet=null,this.$middleFacet=null,this.$orderButton=null,this.$dragging=!1,this.$cursorStartPosition=null,this.$elementStartPosition=null,this.facet("item",null),this.$onItemMoved=t.Fn.bind(r,this),this.$onEndOrdering=t.Fn.bind(a,this),this}function l(){return i.apply(this,arguments),this.$generatedItems=[],this.$items=[],this.$template="{{text}}",this.$headerTemplate="{{text}}",this.$placeHolder=null,this.$selectedItems=[],this.attr("style","normal"),this.attr("sortable",!1),this.attr("selectionMode","single"),this}var o=function(i){if(!this.$dragging){var s=this.el(),n=this.parent(),l=n.el(),o=n.$placeHolder;this.$dragging=!0,e.Dom.on(document,e.Touch.touchMoveEventName,this.$onItemMoved),e.Dom.on(document,e.Touch.touchEndEventName,this.$onEndOrdering),this.$elementStartPosition=t.Dom.getAbsolutePosition(s),s.style.top=this.$elementStartPosition.y+"px";var r=t.Dom.getDimensions(s);return s.style.width=r.width+"px",s.style.height=r.height+"px",o.className=s.className,o.style.width=r.width+"px",o.style.height=r.height+"px",this.$cursorStartPosition=e.Touch.getCursorPosition(i),this.$elementStartPosition=t.Dom.getAbsolutePosition(s),t.Dom.addClass(s,"ui-list-item-drag"),t.Dom.applyChanges(),l.insertBefore(o,s),e.Dom.cancelEvent(i)
}},r=function(t){if(this.$dragging){var i,s,n=this.el(),l=this.parent(),o=l.el(),r=l.$placeHolder,a=e.Touch.getCursorPosition(t),u=o.children,h=null;a.y+=this.$elementStartPosition.y-this.$cursorStartPosition.y,n.style.top=a.y+"px";for(var c=a.y+n.offsetHeight/2,m=0,d=u.length;d>m;++m)if(s=u[m],s!==n){if(i=s.offsetHeight,i/2>=c){h=s;break}c-=i}return h===r?e.Dom.cancelEvent(t):(h?o.insertBefore(r,h):o.appendChild(r),void 0)}},a=function(i){if(this.$dragging){var s=this.el(),n=this.parent(),l=n.el(),o=n.$placeHolder;t.Dom.removeClass(s,"ui-list-item-drag"),s.style.top="",s.style.width="",s.style.height="",e.Dom.off(document,e.Touch.touchMoveEventName,this.$onItemMoved),e.Dom.off(document,e.Touch.touchEndEventName,this.$onEndOrdering),t.Dom.applyChanges(),l.replaceChild(s,o);var r=n.$generatedItems.indexOf(this),a=Array.prototype.indexOf.call(l.children,s);t.Array.moveElement(n.$generatedItems,r,a);var u=n.items();return u="function"==typeof u?u():u,t.Array.moveElement(u,r,a),"function"==typeof n.items().notify&&n.items().notify(u,u),this.$dragging=!1,h.call(n),e.Dom.cancelEvent(i)}};n.extend(i,{header:function(e){return void 0===e?this.$header:(this.$header=e,this.el()&&(this.$header?(t.Dom.addClass(this.el(),"ui-list-header"),t.Dom.removeClass(this.el(),"ui-list-item")):(t.Dom.addClass(this.el(),"ui-list-item"),t.Dom.removeClass(this.el(),"ui-list-header"))),this)},update:function(){if(!this.el()){this.el(document.createElement("li")),this.$table=document.createElement("table"),this.$table.className="ui-fill-width",this.$leftFacet=document.createElement("td"),this.$middleFacet=document.createElement("td"),this.$middleFacet.className="ui-fill-width",this.$rightFacet=document.createElement("td");var s=document.createElement("input");s.setAttribute("type","checkbox"),s.className="meems-scroll-skip",e.Dom.on(s,"change",t.Fn.bind(function(){this.parent().fire("item:checked",this,s.checked)},this)),this.$leftFacet.appendChild(s),this.$orderButton=document.createElement("div"),this.$orderButton.className="ui-icon-order meems-scroll-skip",e.Dom.on(this.$orderButton,e.Touch.touchStartEventName,t.Fn.bind(o,this)),this.$rightFacet.appendChild(this.$orderButton);var n=document.createElement("tr");n.appendChild(this.$leftFacet),n.appendChild(this.$middleFacet),n.appendChild(this.$rightFacet),this.$table.appendChild(n),this.el().appendChild(this.$table),this.header(this.$header)}var l="multiple"===this.parent().attr("selectionMode"),r=this.parent().attr("sortable")===!0;this.$leftFacet.style.display=l?"":"none",this.$rightFacet.style.display=r?"":"none",this.facet("item")&&(this.facet("item").update(),this.facet("item").el().parentNode!==this.$middleFacet&&this.$middleFacet.appendChild(this.facet("item").el())),i.prototype.update.apply(this,arguments)}});var u=function(t,e){var i=new n;return i.parent(this),i.header(t.header===!0),i.header()?i.facet("item",(new s).attr("html",this.$headerTemplate).attr("data",t)):i.facet("item",(new s).attr("html",this.$template).attr("data",t)),i.update(),i.el()._meems_parentList=this,i.el()._meems_item_index=e,i.el()._meems_item=t,i},h=function(){var e,i,s;if(this.$generatedItems){for(i=0,s=this.$generatedItems.length;s>i;++i)e=this.$generatedItems[i],e.header()||(s-1>i?this.$generatedItems[i+1].header()?t.Dom.addClass(e.el(),"ui-list-item-last"):t.Dom.removeClass(e.el(),"ui-list-item-last"):t.Dom.addClass(e.el(),"ui-list-item-last"));t.Dom.applyChanges()}},c=function(e,i){if(this.el()){i="function"==typeof i?i():i;var s,n,l,o,r,a,h=this.el(),c={};if(this.$generatedItems)for(l=0,o=this.$generatedItems.length;o>l;++l){s=this.$generatedItems[l];var m=!1;for(r=0,a=i.length;a>r;++r)if(s.el()._meems_item===i[r]){m=!0,c[r]=l,t.Dom.removeClass(s.el(),"ui-list-item-last"),h.removeChild(s.el());break}if(!m&&s.el()&&s.el().parentNode===h){h.removeChild(s.el()),this.$generatedItems.splice(l,1);var d=this.$selectedItems.indexOf(s);d>-1&&this.$selectedItems.splice(d,1),--l,--o}}for(l=0,o=i.length;o>l;++l)n=i[l],void 0===c[l]?(s=u.call(this,n,l,o),this.$generatedItems.splice(l,0,s)):s=this.$generatedItems[c[l]],h.appendChild(s.el()),s.header()||(o-1>l?i[l+1].header===!0?t.Dom.addClass(s.el(),"ui-list-item-last"):t.Dom.removeClass(s.el(),"ui-list-item-last"):t.Dom.addClass(s.el(),"ui-list-item-last"))}},m=function(t,e){for(var i=e.target;i&&void 0===i._meems_item_index;)i=i.parentNode;return i&&this.fire("item:clicked",i._meems_item,e),!0};return l.extend(i,{template:function(t){return void 0===t?this.$template:(this.$template=t,this)},headerTemplate:function(t){return void 0===t?this.$headerTemplate:(this.$headerTemplate=t,this)},items:function(e){return void 0===e?this.$items:(this.$items=e,c.call(this,null,this.$items),"function"==typeof this.$items.subscribe&&this.$items.subscribe(t.Fn.bind(c,this)),this)},attr:function(e,s){var n="style"===e?i.prototype.attr.call(this,e):null,l=i.prototype.attr.apply(this,arguments);return"style"===e&&void 0!==s&&this.el()&&(n&&t.Dom.removeClass(this.el(),"ui-list-"+n),s&&t.Dom.addClass(this.el(),"ui-list-"+s)),l},getSelectedItems:function(){return this.$selectedItems},update:function(s){this.el()||(this.el(document.createElement("ul")),this.el().className="ui-list",this.on("dom:"+e.Touch.touchEndEventName,t.Fn.bind(m,this)),this.$placeHolder=document.createElement("li"),this.$placeHolder.className="ui-list-item ui-list-placeholder",this.on("item:checked",function(t,e,i){i?this.$selectedItems.push(e.el()._meems_item):this.$selectedItems.splice(this.$selectedItems.indexOf(e.el()._meems_item),1),this.fire("selection:changed",this.$selectedItems)})),s!==!0&&(this.attr("style",this.attr("style")),c.call(this,null,this.$items)),i.prototype.update.apply(this,arguments)}}),l}),i("ui/aside",["meems-utils","./widget"],function(t,e){function i(){return e.apply(this,arguments),this.$expanded=!1,this.facet("menu",null),this.facet("content",null),this}return i.extend(e,{expanded:function(e){return void 0===e?this.$expanded:(this.$expanded=e,this.$expanded?(this.facet("menu")&&(t.Dom.addClass(this.facet("menu").el(),"ui-expanded"),t.Dom.removeClass(this.facet("menu").el(),"ui-collapsed")),this.facet("content")&&(t.Dom.addClass(this.facet("content").el(),"ui-expanded"),t.Dom.removeClass(this.facet("content").el(),"ui-collapsed"))):(this.facet("menu")&&(t.Dom.addClass(this.facet("menu").el(),"ui-collapsed"),t.Dom.removeClass(this.facet("menu").el(),"ui-expanded")),this.facet("content")&&(t.Dom.addClass(this.facet("content").el(),"ui-collapsed"),t.Dom.removeClass(this.facet("content").el(),"ui-expanded"))),this)},update:function(i){this.el()||(this.el(document.createElement("div")),t.Dom.addClass(this.el(),"ui-aside")),this.facet("menu")&&(this.facet("menu").update(i),t.Dom.addClass(this.facet("menu").el(),"ui-aside-menu"),this.facet("menu").el().parentNode!==this.el()&&this.el().appendChild(this.facet("menu").el())),this.facet("content")&&(this.facet("content").update(i),t.Dom.addClass(this.facet("content").el(),"ui-aside-content"),this.facet("content").el().parentNode!==this.el()&&(t.Dom.addClass(this.facet("content").el(),"ui-content ui-scroll-y"),this.el().appendChild(this.facet("content").el()))),this.expanded(this.$expanded),e.prototype.update.apply(this,arguments)}}),i}),i("ui/split_view",["meems-utils","./widget"],function(t,e){function i(){return e.apply(this,arguments),this.attr("layout","horizontal"),this.facet("first",null),this.facet("second",null),this}return i.extend(e,{attr:function(i,s){var n="layout"===i?e.prototype.attr.call(this,i):null,l=e.prototype.attr.apply(this,arguments);return"layout"===i&&void 0!==s&&this.el()&&(n&&t.Dom.removeClass(this.el(),"ui-"+n),s&&t.Dom.addClass(this.el(),"ui-"+s)),l},update:function(t){this.el()||(this.el(document.createElement("div")),this.el().className="ui-splitview",this.attr("layout",this.attr("layout"))),this.facet("first")&&(this.facet("first").update(t),this.facet("first").el().parentNode!==this.el()&&this.el().appendChild(this.facet("first").el())),this.facet("second")&&(this.facet("second").update(t),this.facet("second").el().parentNode!==this.el()&&this.el().appendChild(this.facet("second").el())),e.prototype.update.apply(this,arguments)}}),i}),i("ui/tab",["meems-utils","meems-scroll","./widget"],function(t,e,i){function s(){return i.apply(this,arguments),this.$scroller=null,this.$holder=null,this.facet("content",null),this}return s.extend(i,{update:function(t){this.el()||(this.el(document.createElement("div")),this.el().className="ui-tab");var s=this.facet("content");s&&(s.update(t),this.$holder||(this.$holder=document.createElement("div"),this.$holder.className="ui-fill-width",this.el().appendChild(this.$holder)),s.el().parentNode!==this.$holder&&(this.$holder.appendChild(s.el()),this.$scroller&&this.$scroller.destroy(),this.$scroller=new e(this.el(),{scrollX:!1,scrollY:!0}))),i.prototype.update.apply(this,arguments)}}),s}),i("ui/tab_group",["meems-utils","meems-scroll","./widget","./tab","./button_group","./button"],function(t,e,i,s,n,l){function o(){return i.apply(this,arguments),this.$tabs=[],this.$visibleTab=0,this.$scroller=null,this.$tabHolder=null,this.$buttonGroup=null,this}var r=function(e,i){for(var s=i.target;s&&-1===s.className.indexOf("ui-button");)s=s.parentNode;if(s){var n=t.Array.indexOfByProp(this.$buttonGroup.buttons,"$el",s);n>-1&&this.visibleTab(n)}},a=function(e,i){var s=Math.round(i/this.el().offsetWidth);this.visibleTab(s),this.update(),t.Dom.applyChanges()};return o.extend(i,{addTab:function(t){return this.$tabs.push(t),this},visibleTab:function(t){return void 0===t?this.$visibleTab:0>t||t>=this.$tabs.length?this:(t!==this.$visibleTab&&this.$scroller&&(this.$scroller.scrollTo(t*this.el().offsetWidth),this.$visibleTab=t),this)},tabs:function(){return this.$tabs},partialUpdate:function(e,i,s){"tabPosition"===e&&this.el()&&(t.Dom.removeClass(this.el(),"ui-tab-buttons-"+i),t.Dom.addClass(this.el(),"ui-tab-buttons-"+s))},update:function(s){if(!this.el()){this.el(document.createElement("div")),this.el().className="ui-tab-group",this.$tabHolder=document.createElement("div"),this.$helperHolder=document.createElement("div"),this.$buttonGroup=document.createElement("div"),this.$tabHolder.className="ui-fill",this.$helperHolder.className="ui-tab-holder ui-fill",this.$buttonGroup.className="ui-tab-buttons",this.$buttonGroup.buttons=[],this.$helperHolder.appendChild(this.$tabHolder),this.el().appendChild(this.$helperHolder);var n=this.attr("tabPosition")||"top";this.el().className+="top"===n?" ui-tab-buttons-top":" ui-tab-buttons-bottom",this.el().appendChild(this.$buttonGroup)}if(this.$tabs.length>0){var o,u,h=100/this.$tabs.length;this.$tabHolder.style.width=100*this.$tabs.length+"%";for(var c=0,m=this.$tabs.length;m>c;++c)o=this.$tabs[c],o.update(s),o.el().parentNode!==this.$tabHolder&&(o.el().style.position="absolute",o.el().style.left=c*h+"%",o.el().style.top="0",o.el().style.width=h+"%",o.el().style.bottom="0",this.$tabHolder.appendChild(o.el()),u=(new l).attr("style","vertical"),u.update(s),u.on("dom:"+(t.Dom.supportsTouch()?"touchstart":"click"),t.Fn.bind(r,this)),this.$buttonGroup.appendChild(u.el()),this.$buttonGroup.buttons.push(u)),u=u||this.$buttonGroup.buttons[c],u.attr("title",o.attr("title")).attr("icon",o.attr("icon")).attr("disabled",this.$visibleTab!==c),u.update(s),u.el().style.width=h+"%",c===this.$visibleTab?t.Dom.addClass(u.el(),"ui-selected"):t.Dom.removeClass(u.el(),"ui-selected"),u=null;t.Dom.addClass(this.$tabHolder,"ui-footer-on"),this.$scroller||(this.$scroller=new e(this.$helperHolder,{scrollX:!0,scrollY:!1,bouncing:!1,paging:!0,totalMaxTime:.25,disableTouchEvents:!1,hideScroller:!0}).on("scroll:end",t.Fn.bind(a,this)))}else t.Dom.addClass(this.$tabHolder,"ui-footer-off");i.prototype.update.apply(this,arguments)}}),o}),i("ui/form",["meems-utils","./widget"],function(t,e){function i(){return e.apply(this,arguments),this.$titleEl=null,this.$holder=null,this.$fields=[],this}return i.extend(e,{addField:function(t){return this.$fields.push(t),this},fields:function(t){return void 0===t?this.$fields:(this.$fields=t,this)},partialUpdate:function(e,i,s){"action"===e&&this.el()?this.el().setAttribute("action",s||"#"):"title"===e&&this.$titleEl&&(t.Dom.setHtml(this.$titleEl,s),s.length>0?(t.Dom.addClass(this.$titleEl,"ui-show"),t.Dom.removeClass(this.$titleEl,"ui-hide")):(t.Dom.addClass(this.$titleEl,"ui-hide"),t.Dom.removeClass(this.$titleEl,"ui-show")))},update:function(i){this.el()||(this.el(document.createElement("form")),this.el().className="ui-form",this.el().setAttribute("action",this.attr("action")||"#"),this.$titleEl=document.createElement("div"),this.$titleEl.className="ui-title",this.el().appendChild(this.$titleEl),this.$holder=document.createElement("div"),this.$holder.className="ui-form-fields",this.el().appendChild(this.$holder));var s=this.attr("title")||"";t.Dom.setHtml(this.$titleEl,s),s.length>0?(t.Dom.addClass(this.$titleEl,"ui-show"),t.Dom.removeClass(this.$titleEl,"ui-hide")):(t.Dom.addClass(this.$titleEl,"ui-hide"),t.Dom.removeClass(this.$titleEl,"ui-show"));for(var n,l=0;this.$fields.length>l;++l)n=this.$fields[l],n.update(i),n.el().parentNode!==this.$holder&&this.$holder.appendChild(n.el());e.prototype.update.apply(this,arguments)}}),i}),i("ui/textfield",["meems-utils","meems-events","./widget"],function(t,e,i){function s(){return this.$input=null,this.$label=null,this.$value=null,i.apply(this,arguments),this}var n=function(t,e){this.$input&&(this.$input.value=e)};return s.extend(i,{value:function(t){return void 0===t?"function"==typeof this.$value?this.$value:this.$input.value:(this.$value=t,n.call(this,null,t),this)},partialUpdate:function(e,i,s){"label"===e&&this.$label&&t.Dom.setHtml(this.$label,s||"")},update:function(){if(!this.el()){this.el(document.createElement("div")),this.$label=document.createElement("label"),this.$input=document.createElement("input"),this.$input.setAttribute("type",this.attr("type")||"text"),this.el().appendChild(this.$label);var s=document.createElement("div");s.appendChild(this.$input),this.el().appendChild(s),this.el().className="ui-textfield",e.Dom.on(this.$input,"change",t.Fn.bind(function(){"function"==typeof this.$value&&this.$value(this.$input.value)},this)),"function"==typeof this.$value&&"subscribe"in this.$value&&this.$value.subscribe(n)}t.Dom.setHtml(this.$label,this.attr("label")||""),i.prototype.update.apply(this,arguments)}}),s}),i("ui/page_holder",["meems-utils","./widget","./page"],function(t,e){function i(){return e.apply(this,arguments),this.$pages=[],this.$currentPage=null,this}return i.extend(e,{pages:function(t){if(void 0===t)return this.$pages;var e,i,s;if(this.$pages)for(i=0,s=this.$pages.length;s>i;++i)e=this.$pages[i],e.el()&&e.el().parentNode===this.el()&&this.el().removeChild(e.el());if(this.$pages=t,this.$pages)for(i=0,s=this.$pages.length;s>i;++i)e=this.$pages[i],e.el()&&e.el().parentNode!==this.el()&&this.el().appendChild(e.el());return this},currentPage:function(e){return void 0===e?this.$currentPage:(this.$currentPage&&(t.Dom.removeClass(this.$currentPage.el(),"ui-show"),t.Dom.addClass(this.$currentPage.el(),"ui-hide")),this.$currentPage=e,this.$currentPage&&(t.Dom.removeClass(this.$currentPage.el(),"ui-hide"),t.Dom.addClass(this.$currentPage.el(),"ui-show")),this)},update:function(i){if(this.el()||(this.el(document.createElement("div")),this.el().className="ui-page-holder"),this.$pages)for(var s,n=0,l=this.$pages.length;l>n;++n)s=this.$pages[n],s.update(i),s.el()&&s.el().parentNode!==this.el()&&this.el().appendChild(s.el()),this.$currentPage||(this.$currentPage=s),s.el()&&(this.$currentPage===s?(t.Dom.removeClass(this.$currentPage.el(),"ui-hide"),t.Dom.addClass(this.$currentPage.el(),"ui-show")):(t.Dom.addClass(s.el(),"ui-hide"),t.Dom.removeClass(s.el(),"ui-show")));e.prototype.update.apply(this,arguments)}}),i}),i("ui/group",["meems-utils","./widget"],function(t,e){function i(){return e.apply(this,arguments),this.$children=[],this}return i.extend(e,{children:function(t){if(void 0===t)return this.$children;var e,i,s;if(this.$children)for(i=0,s=this.$children.length;s>i;++i)e=this.$children[i],e.el().parentNode===this.el()&&this.el().removeChild(e.el());this.$children=t;for(var i=0,s=this.$children.length;s>i;++i)e=this.$children[i],e.el()&&e.el().parentNode!==this.el()&&this.el().appendChild(e.el());return this},appendChild:function(t){return this.$children.push(t),this.el()&&t.el()&&t.el().parentNode!==this.el()&&this.el().appendChild(t.el()),this},removeChild:function(e){return t.Array.remove(this.$children,e),this.el()&&e.el()&&e.el().parentNode===this.el()&&this.el().removeChild(e.el()),this},update:function(t){this.el()||(this.el(document.createElement("div")),this.el().className="ui-group");for(var i,s=0,n=this.$children.length;n>s;++s)i=this.$children[s],i.update(t),i.el().parentNode!==this.el()&&this.el().appendChild(i.el());e.prototype.update.apply(this,arguments)}}),i}),i("ui/switch",["meems-utils","meems-events","./widget"],function(t,e,i){function s(){return this.$input=null,this.$label=null,this.$value=!1,i.apply(this,arguments),this}var n=function(t,e){var i="function"==typeof e?e():e;this.$input&&(this.$input.checked=i)};return s.extend(i,{value:function(t){return void 0===t?this.$value:(n.call(this,this.$value,t),this.$value=t,this)},partialUpdate:function(e,i,s){"label"===e&&this.$label&&t.Dom.setHtml(this.$label,s||"")},update:function(){if(!this.el()){this.el(document.createElement("div")),this.$label=document.createElement("label"),this.$input=document.createElement("input"),this.$inputLabel=document.createElement("label"),this.$inputLabel.appendChild(document.createElement("b")),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("checked","checkbox");var s=document.createElement("div");n.call(this,null,this.$value),s.appendChild(this.$input),s.appendChild(this.$inputLabel),this.el().appendChild(this.$label),this.el().appendChild(s),this.el().className="ui-switch",e.Dom.on(s,e.Touch.touchEndEventName,t.Fn.bind(function(){if("function"==typeof this.$value){var e=!this.$value();this.$input.checked=e,this.$value(e)}else n.call(this,this.$value,!this.$value),this.$value=!this.$value,this.$input.checked=this.$value;t.Dom.applyChanges()},this)),"function"==typeof this.$value&&"subscribe"in this.$value&&this.$value.subscribe(t.Fn.bind(n,this))}t.Dom.setHtml(this.$label,this.attr("label")||""),i.prototype.update.apply(this,arguments)}}),s}),i("ui/slider",["meems-utils","meems-events","./widget"],function(t,e,i){function s(){return this.$input=null,this.$label=null,this.$value=!1,i.apply(this,arguments),this}var n=function(t,e){var i="function"==typeof e?e():e;if(this.$input){var s=this.attr("minimum")||0,n=this.attr("maximum")||100,l=100*Math.max(Math.min((i-s)/(n-s),1),0);this.$inputBar.style.width=l+"%",this.$inputHandle.style.left=l+"%"}},l=function(i){this.$meems_ui_slider_move&&e.Dom.off(this.$input,e.Touch.touchMoveEventName,this.$meems_ui_slider_move),this.$meems_ui_slider_end&&e.Dom.off(this.$input,e.Touch.touchEndEventName,this.$meems_ui_slider_end),this.$meems_ui_slider_start_pos=e.Touch.getCursorPosition(i),this.$meems_ui_slider_pos=t.Dom.getPosition(this.$input),this.$meems_ui_slider_size=t.Dom.getDimensions(this.$input);var s=this.$meems_ui_slider_start_pos.x-this.$meems_ui_slider_pos.x,l=Math.min(Math.max(s/this.$meems_ui_slider_size.width,0),1),a=this.attr("minimum")||0,u=this.attr("maximum")||100;return l=l*(u-a)+a,"function"==typeof this.$value?this.$value(l):(this.$value=l,n.call(this,null,l)),this.$meems_ui_slider_move=t.Fn.bind(o,this),this.$meems_ui_slider_end=t.Fn.bind(r,this),e.Dom.on(this.$input,e.Touch.touchMoveEventName,this.$meems_ui_slider_move),e.Dom.on(this.$input,e.Touch.touchEndEventName,this.$meems_ui_slider_end),t.Dom.applyChanges(),e.Dom.cancelEvent(i)},o=function(t){var i=e.Touch.getCursorPosition(t),s=i.x-this.$meems_ui_slider_pos.x,l=Math.min(Math.max(s/this.$meems_ui_slider_size.width,0),1),o=this.attr("minimum")||0,r=this.attr("maximum")||100;return l=l*(r-o)+o,"function"==typeof this.$value?this.$value(l):(this.$value=l,n.call(this,null,l)),e.Dom.cancelEvent(t)},r=function(){e.Dom.off(this.$input,e.Touch.touchMoveEventName,this.$meems_ui_slider_move),e.Dom.off(this.$input,e.Touch.touchEndEventName,this.$meems_ui_slider_end),this.$meems_ui_slider_end=null,this.$meems_ui_slider_move=null};return s.extend(i,{value:function(t){return void 0===t?this.$value:(n.call(this,this.$value,t),this.$value=t,this)},partialUpdate:function(e,i,s){"label"===e&&this.$label&&t.Dom.setHtml(this.$label,s||"")},update:function(){this.el()||(this.el(document.createElement("div")),this.$label=document.createElement("label"),this.$inputBar=document.createElement("div"),this.$inputBar.className="ui-bar",this.$inputHandle=document.createElement("div"),this.$inputHandle.className="ui-handle",this.$input=document.createElement("div"),n.call(this,null,this.$value),this.$input.appendChild(this.$inputBar),this.$input.appendChild(this.$inputHandle),this.el().appendChild(this.$label),this.el().appendChild(this.$input),this.el().className="ui-slider",e.Dom.on(this.$input,e.Touch.touchStartEventName,t.Fn.bind(l,this)),"function"==typeof this.$value&&"subscribe"in this.$value&&this.$value.subscribe(t.Fn.bind(n,this))),t.Dom.setHtml(this.$label,this.attr("label")||""),i.prototype.update.apply(this,arguments)}}),s}),i("meems-ui",["./observable","./ui/widget","./ui/header","./ui/footer","./ui/page","./ui/html","./ui/button","./ui/button_group","./ui/list","./ui/aside","./ui/split_view","./ui/tab_group","./ui/tab","./ui/form","./ui/textfield","./ui/page_holder","./ui/group","./ui/switch","./ui/slider"],function(t,e,i,s,n,l,o,r,a,u,h,c,m,d,p,f,$,v,g){var b={header:i,footer:s,page:n,html:l,button:o,buttongroup:r,list:a,aside:u,splitview:h,tabgroup:c,tab:m,form:d,textfield:p,pageholder:f,group:$,"switch":v,slider:g},_={create:function(t,e){var i=b[t]?new b[t]:null;return i&&e&&i.parent(e),i}};return _}),i("meems",["./observable","./meems-ui","meems-events","meems-utils","meems-scroll"],function(t,e,i,s,n){var l={Observable:t,UI:e,Events:i,Utils:s,Scroll:n};return l}),e("meems")});