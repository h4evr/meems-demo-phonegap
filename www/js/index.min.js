/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e,t){"function"==typeof define&&define.amd?define(t):e.RSSApp=t()})(this,function(){function e(e){for(var t,i=document.getElementsByTagName("head")[0],s=i.childNodes[0],n=0,l=e.length;l>n;++n)t=document.createElement("link"),t.type="text/css",t.rel="stylesheet",t.href=e[n],i.insertBefore(t,s)}function t(){var e;return(e=/theme=(\w+)/.exec(window.location.search))?e[1]:null}var i,s,n;(function(e){function t(e,t){return y.call(e,t)}function l(e,t){var i,s,n,l,a,o,r,u,h,c,d=t&&t.split("/"),m=g.map,p=m&&m["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),e=d.concat(e.split("/")),u=0;e.length>u;u+=1)if(c=e[u],"."===c)e.splice(u,1),u-=1;else if(".."===c){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||p)&&m){for(i=e.split("/"),u=i.length;u>0;u-=1){if(s=i.slice(0,u).join("/"),d)for(h=d.length;h>0;h-=1)if(n=m[d.slice(0,h).join("/")],n&&(n=n[s])){l=n,a=u;break}if(l)break;!o&&p&&p[s]&&(o=p[s],r=u)}!l&&o&&(l=o,a=r),l&&(i.splice(0,a,l),e=i.join("/"))}return e}function a(t,i){return function(){return m.apply(e,_.call(arguments,0).concat([t,i]))}}function o(e){return function(t){return l(t,e)}}function r(e){return function(t){v[e]=t}}function u(i){if(t($,i)){var s=$[i];delete $[i],b[i]=!0,d.apply(e,s)}if(!t(v,i)&&!t(b,i))throw Error("No "+i);return v[i]}function h(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function c(e){return function(){return g&&g.config&&g.config[e]||{}}}var d,m,p,f,v={},$={},g={},b={},y=Object.prototype.hasOwnProperty,_=[].slice;p=function(e,t){var i,s=h(e),n=s[0];return e=s[1],n&&(n=l(n,t),i=u(n)),n?e=i&&i.normalize?i.normalize(e,o(t)):l(e,t):(e=l(e,t),s=h(e),n=s[0],e=s[1],n&&(i=u(n))),{f:n?n+"!"+e:e,n:e,pr:n,p:i}},f={require:function(e){return a(e)},exports:function(e){var t=v[e];return t!==void 0?t:v[e]={}},module:function(e){return{id:e,uri:"",exports:v[e],config:c(e)}}},d=function(i,s,n,l){var o,h,c,d,m,g,y=[];if(l=l||i,"function"==typeof n){for(s=!s.length&&n.length?["require","exports","module"]:s,m=0;s.length>m;m+=1)if(d=p(s[m],l),h=d.f,"require"===h)y[m]=f.require(i);else if("exports"===h)y[m]=f.exports(i),g=!0;else if("module"===h)o=y[m]=f.module(i);else if(t(v,h)||t($,h)||t(b,h))y[m]=u(h);else{if(!d.p)throw Error(i+" missing "+h);d.p.load(d.n,a(l,!0),r(h),{}),y[m]=v[h]}c=n.apply(v[i],y),i&&(o&&o.exports!==e&&o.exports!==v[i]?v[i]=o.exports:c===e&&g||(v[i]=c))}else i&&(v[i]=n)},i=s=m=function(t,i,s,n,l){return"string"==typeof t?f[t]?f[t](i):u(p(t,i).f):(t.splice||(g=t,i.splice?(t=i,i=s,s=null):t=e),i=i||function(){},"function"==typeof s&&(s=n,n=l),n?d(e,t,i,s):setTimeout(function(){d(e,t,i,s)},4),m)},m.config=function(e){return g=e,g.deps&&m(g.deps,g.callback),m},n=function(e,i,s){i.splice||(s=i,i=[]),t(v,e)||t($,e)||($[e]=[e,i,s])},n.amd={jQuery:!0}})(),n("../tools/almond",function(){}),function(e,t){"function"==typeof n&&n.amd?n("meems",t):e.Meems=t()}(this,function(){var e,t,i;return function(s){function n(e,t){return y.call(e,t)}function l(e,t){var i,s,n,l,a,o,r,u,h,c,d=t&&t.split("/"),m=g.map,p=m&&m["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),e=d.concat(e.split("/")),u=0;e.length>u;u+=1)if(c=e[u],"."===c)e.splice(u,1),u-=1;else if(".."===c){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||p)&&m){for(i=e.split("/"),u=i.length;u>0;u-=1){if(s=i.slice(0,u).join("/"),d)for(h=d.length;h>0;h-=1)if(n=m[d.slice(0,h).join("/")],n&&(n=n[s])){l=n,a=u;break}if(l)break;!o&&p&&p[s]&&(o=p[s],r=u)}!l&&o&&(l=o,a=r),l&&(i.splice(0,a,l),e=i.join("/"))}return e}function a(e,t){return function(){return m.apply(s,_.call(arguments,0).concat([e,t]))}}function o(e){return function(t){return l(t,e)}}function r(e){return function(t){v[e]=t}}function u(e){if(n($,e)){var t=$[e];delete $[e],b[e]=!0,d.apply(s,t)}if(!n(v,e)&&!n(b,e))throw Error("No "+e);return v[e]}function h(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function c(e){return function(){return g&&g.config&&g.config[e]||{}}}var d,m,p,f,v={},$={},g={},b={},y=Object.prototype.hasOwnProperty,_=[].slice;p=function(e,t){var i,s=h(e),n=s[0];return e=s[1],n&&(n=l(n,t),i=u(n)),n?e=i&&i.normalize?i.normalize(e,o(t)):l(e,t):(e=l(e,t),s=h(e),n=s[0],e=s[1],n&&(i=u(n))),{f:n?n+"!"+e:e,n:e,pr:n,p:i}},f={require:function(e){return a(e)},exports:function(e){var t=v[e];return void 0!==t?t:v[e]={}},module:function(e){return{id:e,uri:"",exports:v[e],config:c(e)}}},d=function(e,t,i,l){var o,h,c,d,m,g,y=[];if(l=l||e,"function"==typeof i){for(t=!t.length&&i.length?["require","exports","module"]:t,m=0;t.length>m;m+=1)if(d=p(t[m],l),h=d.f,"require"===h)y[m]=f.require(e);else if("exports"===h)y[m]=f.exports(e),g=!0;else if("module"===h)o=y[m]=f.module(e);else if(n(v,h)||n($,h)||n(b,h))y[m]=u(h);else{if(!d.p)throw Error(e+" missing "+h);d.p.load(d.n,a(l,!0),r(h),{}),y[m]=v[h]}c=i.apply(v[e],y),e&&(o&&o.exports!==s&&o.exports!==v[e]?v[e]=o.exports:c===s&&g||(v[e]=c))}else e&&(v[e]=i)},e=t=m=function(e,t,i,n,l){return"string"==typeof e?f[e]?f[e](t):u(p(e,t).f):(e.splice||(g=e,t.splice?(e=t,t=i,i=null):e=s),t=t||function(){},"function"==typeof i&&(i=n,n=l),n?d(s,e,t,i):setTimeout(function(){d(s,e,t,i)},4),m)},m.config=function(e){return g=e,g.deps&&m(g.deps,g.callback),m},i=function(e,t,i){t.splice||(i=t,t=[]),n(v,e)||n($,e)||($[e]=[e,t,i])},i.amd={jQuery:!0}}(),i("../tools/almond",function(){}),i("observable",[],function(){function e(t){var i=function(e){var t=arguments.callee;if(void 0===e)return t.$currentVal;var i=t.$currentVal;return t.$currentVal=e,t.notify(i,e),this};return i.$currentVal=t,i.$observers=[],i.subscribe=e.prototype.subscribe,i.unsubscribe=e.prototype.unsubscribe,i.notify=e.prototype.notify,i}e.prototype.subscribe=function(e){return this.$observers.push(e),this},e.prototype.unsubscribe=function(e){return this.$observers.remove(e),this},e.prototype.notify=function(e,t){for(var i=0,s=this.$observers.length;s>i;++i)this.$observers[i].call(this,e,t);return this};var t=function(e){return function(){var t=this.$currentVal;e.apply(this.$currentVal,arguments),this.notify(t,this.$currentVal)}},i={indexOf:t(Array.prototype.indexOf),push:t(Array.prototype.push),pop:t(Array.prototype.pop),slice:t(Array.prototype.slice),splice:t(Array.prototype.splice),shift:t(Array.prototype.shift),unshift:t(Array.prototype.unshift),reverse:t(Array.prototype.reverse),sort:t(Array.prototype.sort),remove:function(e){var t=this.$currentVal.indexOf(e);t>-1&&this.$currentVal.splice(t,1)},removeAll:function(e){var t,i,s,n,l;for(t=0,i=e.length;i>t;++t)for(l=e[t],s=0,n=this.$currentVal.length;n>s;++s)this.$currentVal[s]===l&&(this.$currentVal.splice(s,1),--s,--n)}},s={observable:function(t){return new e(t)},observableArray:function(e){var t=s.observable(e||[]);for(var n in i)t[n]=i[n];return t}};return s}),i("meems-utils",[],function(){var e=document.head||document.getElementsByTagName("head")[0],t="ontouchstart"in window,i={},s={},n=0,l={},a={Fn:{extend:function(e,t,i){"function"==typeof e&&(e.prototype=new t,e.constructor=e,e=e.prototype);for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s])},postPone:function(e){setTimeout(e,10)},bind:function(e,t){return function(){e.apply(t,arguments)}},throttle:function(e,t){var i,s;return function(){if(s=(new Date).getTime(),!i||s-i>t){var n=e.apply(this,arguments);return i=s,n}}}},Array:{indexOfByProp:function(e,t,i){for(var s=0;e.length>s;++s)if(e[s][t]===i)return s;return-1},remove:function(e,t){for(var i=0,s=e.length;s>i;++i)if(e[i]===t)return e.splice(i,0),void 0},moveElement:function(e,t,i){var s,n;if(t=parseInt(t,10),i=parseInt(i,10),t!==i&&t>=0&&e.length>=t&&i>=0&&e.length>=i){if(n=e[t],i>t)for(s=t;i>s;s++)e[s]=e[s+1];else for(s=t;s>i;s--)e[s]=e[s-1];e[i]=n}}},Map:{getKeys:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}},Dom:{getClass:function(e){return e.$meems_uid?e.$meems_uid in i&&i[e.$meems_uid]||(i[e.$meems_uid]=e.className):(e.$meems_uid=++n,l[e.$meems_uid]=e,i[e.$meems_uid]=e.className),i[e.$meems_uid]},addClass:function(e,t){var s=this.getClass(e);i[e.$meems_uid]=s.replace(RegExp("\\b"+t+"\\b"),"")+" "+t},removeClass:function(e,t){var s=this.getClass(e);i[e.$meems_uid]=s.replace(RegExp("\\b"+t+"\\b"),"")},setClass:function(e,t){e.$meems_uid||(e.$meems_uid=++n,l[e.$meems_uid]=e),i[e.$meems_uid]=t},setHtml:function(e,t){e.$meems_uid||(e.$meems_uid=++n,l[e.$meems_uid]=e),s[e.$meems_uid]=t},applyChanges:function(){var e,t,n;for(n in i)i.hasOwnProperty(n)&&(e=i[n],e&&(l[n].className=e));for(n in s)s.hasOwnProperty(n)&&(t=s[n],t&&(l[n].innerHTML=t));i={},s={}},fixedViewport:function(){var t=document.createElement("meta");t.setAttribute("name","viewport"),t.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1"),e.appendChild(t)},supportsTouch:function(){return t},getPosition:function(e){var t=e,i={x:0,y:0};do i.x+=t.offsetLeft,i.y+=t.offsetTop;while(t=t.offsetParent);return i},getAbsolutePosition:function(e){for(var t=e,i={x:0,y:0};t&&"absolute"!==t.style.position;){i.x+=t.offsetLeft,i.y+=t.offsetTop,t=t.offsetParent;break}return i},getDimensions:function(e){var t=window.getComputedStyle(e,null);return{width:parseFloat(t.getPropertyValue("width")),height:parseFloat(t.getPropertyValue("height"))}}}};return void 0===Function.prototype.extend&&(Function.prototype.extend=function(e,t){a.Fn.extend(this,e,t)}),a}),i("meems-events",[],function(){function e(){return this.$handlers={},this}var t,i,s,n;"ontouchstart"in window?(t="touchstart",s="touchmove",i="touchend",n=function(e){return{x:e.touches[0].pageX,y:e.touches[0].pageY}}):(t="mousedown",s="mousemove",i="mouseup",n=function(e){return{x:e.pageX,y:e.pageY}});var l=function(){function e(e,t,i){e.addEventListener(t,i,!0)}function t(e,t,i){e.attachEvent("on"+t,i)}function i(e,t,i){e["on"+t]=i}function s(e,t,i){e.removeEventListener(t,i,!0)}function n(e,t,i){e.detachEvent("on"+t,i)}function l(e,t){e["on"+t]=null}var a="addEventListener"in window,o="attachEvent"in window;return{on:a?e:o?t:i,off:a?s:o?n:l,cancelEvent:function(e){return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1}}}();e.prototype={on:function(e,t){return this.$handlers[e]=this.$handlers[e]||[],this.$handlers[e].push(t),this},off:function(e,t){return void 0!==this.$handlers[e]&&(this.$handlers[e]=this.$handlers[e].filter(function(e){return e!==t})),this},fire:function(e){for(var t=this.$handlers[e]||[],i=0;t.length>i;++i)t[i].apply(this,arguments);return this}};var a={Dom:l,Handler:e,Touch:{touchStartEventName:t,touchEndEventName:i,touchMoveEventName:s,getCursorPosition:n}};return a}),i("ui/widget",["meems-utils","meems-events"],function(e,t){function i(){return this.$el=null,this.$parent=null,this.$facets={},this.$attributes={},this.$eventHandlers=null,t.Handler.apply(this,arguments),this}return i.extend(t.Handler,{on:function(e,i){return 0===e.indexOf("dom:")?this.$el?t.Dom.on(this.el(),e.substr(4),function(){Array.prototype.unshift.call(arguments,e),i.apply(this,arguments)}):(this.$eventHandlers=this.$eventHandlers||[],this.$eventHandlers.push([e,i])):t.Handler.prototype.on.apply(this,arguments),this},off:function(e,i){return 0===e.indexOf("dom:")?t.Dom.off(this.el(),e.substr(4),i):t.Handler.prototype.off.apply(this,arguments),this},fire:function(){for(var e=this;e;)t.Handler.prototype.fire.apply(e,arguments),e=e.parent();return this},el:function(e){if(void 0===e)return this.$el;if(this.$el=e,this.$el&&this.$eventHandlers){for(var t,i=0,s=this.$eventHandlers.length;s>i;++i)t=this.$eventHandlers[i],this.on(t[0],t[1]);this.$eventHandlers=null}return this},facets:function(){return e.Map.getKeys(this.$facets)},parent:function(e){return void 0===e?this.$parent:(this.$parent=e,this)},facet:function(e,t){return void 0===t?this.$facets[e]:(this.$el&&this.$facets[e]&&this.$facets[e].el()&&this.$facets[e].el().parentNode===this.$el&&this.$el.removeChild(this.$facets[e].el()),this.$facets[e]=t,this)},attr:function(t,i){if(void 0===i){var s=this.$attributes[t];return"function"==typeof s?s():s}return this.$attributes[t]=i,i&&void 0!==i.subscribe&&"function"==typeof i.subscribe&&i.subscribe(function(t,i){return e.Fn.bind(function(e,i){this.partialUpdate(t,e,i)},i)}(t,this)),this},partialUpdate:function(){this.update()},update:function(){this.el()&&this.$attributes.customClass&&(e.Dom.addClass(this.el(),this.$attributes.customClass),this.$attributes.customClass=null)}}),i}),i("ui/header",["meems-utils","./widget"],function(e,t){function i(){return t.apply(this,arguments),this.facet("buttonsleft",null),this.facet("buttonsright",null),this.$titleEl=null,this}return i.extend(t,{partialUpdate:function(t,i,s){"title"===t&&this.$titleEl&&e.Dom.setHtml(this.$titleEl,"<h1>"+(s||"")+"</h1>")},update:function(i){this.el()||(this.el(document.createElement("div")),this.el().className="ui-header",this.$titleEl=document.createElement("div"),this.$titleEl.className="ui-title",this.el().appendChild(this.$titleEl)),e.Dom.setHtml(this.$titleEl,"<h1>"+(this.attr("title")||"")+"</h1>"),this.facet("buttonsleft")&&(this.facet("buttonsleft").update(i),this.facet("buttonsleft").el().parentNode!==this.el()&&(e.Dom.addClass(this.facet("buttonsleft").el(),"ui-buttons-left"),this.el().insertBefore(this.facet("buttonsleft").el(),this.$titleEl))),this.facet("buttonsright")&&(this.facet("buttonsright").update(i),this.facet("buttonsright").el().parentNode!==this.el()&&(e.Dom.addClass(this.facet("buttonsright").el(),"ui-buttons-right"),this.el().appendChild(this.facet("buttonsright").el()))),t.prototype.update.apply(this,arguments)}}),i}),i("ui/footer",["meems-utils","./widget"],function(e,t){function i(){return t.apply(this,arguments),this.facet("buttons",null),this}return i.extend(t,{update:function(i){this.el()||(this.el(document.createElement("div")),e.Dom.addClass(this.el(),"ui-footer")),this.facet("buttons")&&(this.facet("buttons").update(i),this.facet("buttons").el().parentNode!==this.el()&&(e.Dom.addClass(this.facet("buttons").el(),"ui-buttons"),this.el().appendChild(this.facet("buttons").el()))),t.prototype.update.apply(this,arguments)}}),i}),i("meems-scroll",["meems-utils","meems-events"],function(e,t){function i(e,i){i.disableTouchEvents||(t.Dom.on(e,t.Touch.touchStartEventName,r),t.Dom.on(e,t.Touch.touchMoveEventName,h),t.Dom.on(e,t.Touch.touchEndEventName,c)),e.$meems_scroll=!0,e.$meems_config=i,e.style.overflow="hidden",e.$meems_content.style.position="absolute"}function s(e,i){delete e.$meems_scroll,delete e.$meems_config,i.disableTouchEvents||(t.Dom.off(e,t.Touch.touchStartEventName,r),t.Dom.off(e,t.Touch.touchMoveEventName,h),t.Dom.off(e,t.Touch.touchEndEventName,c))}function n(e){var t=e.target;if(t.className.indexOf("meems-scroll-skip")>-1)return null;for(;void 0===t.$meems_scroll&&t.parentNode;)t=t.parentNode;return t}function l(e,t,i,s,n,l,a){var o=t-i,r=o/n,u=Math.abs(r/e.friction),h=s-r*u;e.paging?(h>s+l?h=s+l:s-l>h&&(h=s-l),h=Math.round(h/l)*l):e.snap&&e.snap>0&&(h=Math.round(h/e.snap)*e.snap);var c=h;return l>a?0>c&&(c=0):-a+l>c&&(c=-a+l),c>0&&(c=0),h!==c&&(u*=Math.abs((t-c)/(t-h)),h=c),u>e.totalMaxTime&&(u=e.totalMaxTime),[h,u]}function a(){_=!0}function o(){_=!1}function r(e){var i=n(e);if(!i)return!0;var s=i.$meems_content;return i.$meems_content_size=C(s),i.$meems_old_pos={x:i.$meems_content_size.left,y:i.$meems_content_size.top},s.style[b]="",i.$meems_dragging=!0,i.$meems_dragging_start=(new Date).getTime(),i.$meems_cursor_pos=t.Touch.getCursorPosition(e),i.$meems_cursor_last_pos=i.$meems_cursor_pos,i.$meems_scrolling_running_animation=!1,i.$meems_drag_distance=0,i.$meems_effective_drag_distance=0,i.$meems_locked_axis=void 0,++y,!0}function u(i){if(_){var s=n(i);if(s){var a=s.$meems_content;s.$meems_content_size=C(a);var o=t.Touch.getCursorPosition(i),r=s.$meems_config,u=e.Dom.getPosition(s),h=s.$meems$elm_size.height,c=s.$meems_content_size.height;if(r.scrollY){var m=0;if(100>=o.y-u.y?m=50:100>=u.y+h-o.y&&(m=-50),0!==m){var p=l({paging:!1,snap:!1,totalMaxTime:.5,friction:r.friction},0,m,s.$meems_content_size.top,.5,h,c),f=p[0],v=p[1];d(s,null,null,f,v)}}}}}function h(e){if(!_||0>=y)return u(e),!0;var i=n(e);if(!i||!i.$meems_dragging)return u(e),!0;var s=i.$meems_config,l=t.Touch.getCursorPosition(e),a=i.$meems_cursor_pos.x-l.x,o=i.$meems_cursor_pos.y-l.y;if(s.minDistanceOfDrag>i.$meems_drag_distance)return i.$meems_drag_distance+=a*a+o*o,e.preventDefault&&e.preventDefault(),!0;s.axisLock&&void 0===i.$meems_locked_axis&&(i.$meems_locked_axis=a*a>o*o?"x":"y");var r,h,c=i.$meems_content;return!s.scrollX||"x"!==i.$meems_locked_axis&&void 0!==i.$meems_locked_axis||(r=i.$meems_old_pos.x-a,s.bouncing||(r>0?r=0:-i.$meems_content_size.width+i.$meems$elm_size.width>r&&(r=-i.$meems_content_size.width+i.$meems$elm_size.width)),i.$meems_effective_drag_distance+=a*a,s.hideScroller||(i.$meems_scrollbar_x.style.display="block")),!s.scrollY||"y"!==i.$meems_locked_axis&&void 0!==i.$meems_locked_axis||(h=i.$meems_old_pos.y-o,s.bouncing||(h>0?h=0:-i.$meems_content_size.height+i.$meems$elm_size.height>h&&(h=-i.$meems_content_size.height+i.$meems$elm_size.height)),i.$meems_effective_drag_distance+=o*o,s.hideScroller||(i.$meems_scrollbar_y.style.display="block")),w(i,r,h),i.$meems_cursor_last_pos=l,v(i,c),e.preventDefault&&e.preventDefault(),!0}function c(e){_=!1;var t=n(e);if(!t||!t.$meems_dragging)return!0;--y,t.$meems_dragging=!1;var i=t.$meems_config;if(i.minDistanceOfDrag>t.$meems_effective_drag_distance)return!0;var s,a,o,r,u,h,c=t.$meems_cursor_last_pos,m=((new Date).getTime()-t.$meems_dragging_start)/1e3;if(i.scrollY){var p=t.$meems$elm_size.height,f=t.$meems_content_size.height;s=l(i,t.$meems_cursor_pos.y,c.y,t.$meems_old_pos.y,m,p,f),a=s[0],o=s[1],s=null}if(i.scrollX){var v=t.$meems$elm_size.width,$=t.$meems_content_size.width;r=l(i,t.$meems_cursor_pos.x,c.x,t.$meems_old_pos.x,m,v,$),u=r[0],h=r[1],r=null}return d(t,u,h,a,o),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),void 0!==e.cancelBubble&&(e.cancelBubble=!0),!1}function d(t,i,s,n,l){var a=t.$meems_config,o=t.$meems_content,r="";a.scrollY&&(r="top "+l+"s "+a.timingFunction),a.scrollX&&(a.scrollY&&(r+=", "),r+="left "+s+"s "+a.timingFunction),r.length>0&&(o.style[b]=r,window.requestAnimationFrame(function(){var a=0;void 0!==n&&(a=Math.max(a,l)),void 0!==i&&(a=Math.max(a,s)),w(t,i,n),a>0&&(f(t,a),e.Fn.postPone(function(){t.$meems_handler.fire("scroll:end",-(i||0),-(n||0))}))}))}function m(e,t){t.hideScroller||(e.$meems_scrollbar_y=document.createElement("div"),e.$meems_scrollbar_y.className="ui-scroll-bar-y",e.$meems_scrollbar_y.style.position="absolute",e.appendChild(e.$meems_scrollbar_y))}function p(e,t){t.hideScroller||(e.$meems_scrollbar_x=document.createElement("div"),e.$meems_scrollbar_x.className="ui-scroll-bar-x",e.$meems_scrollbar_x.style.position="absolute",e.appendChild(e.$meems_scrollbar_x))}function f(e,t){function i(){var t=(new Date).getTime();a-=o*(t-n),u&&(u.style.opacity=a),h&&(h.style.opacity=a),e.$meems_scrolling_running_animation&&m>t-d?(n=t,window.requestAnimationFrame(i)):(u&&(u.style.display="none",u.style.opacity=l),h&&(h.style.display="none",h.style.opacity=l),e.$meems_scrolling_running_animation=!1)}function s(){var t=(new Date).getTime();v(e,r),e.$meems_scrolling_running_animation&&c>t-d?window.requestAnimationFrame(s):(l=u&&document.defaultView.getComputedStyle(u,null).opacity||h&&document.defaultView.getComputedStyle(h,null).opacity||1,a=l,o=l/m,n=d=(new Date).getTime(),window.requestAnimationFrame(i))}var n,l,a,o,r=e.$meems_content,u=e.$meems_scrollbar_x,h=e.$meems_scrollbar_y,c=1e3*t,d=(new Date).getTime(),m=1e3*e.$meems_config.fadeOutDuration;e.$meems_scrolling_running_animation=!0,window.requestAnimationFrame(s)}function v(e,t){var i=e.$meems_config;if(!i.hideScroller){if(i.scrollY){var s=e.$meems_scrollbar_y,n=e.$meems$elm_size.height,l=e.$meems_content_size.height,a=Math.min(n,l)/l*n,o=-t.offsetTop/l*n;s.style.top=o+"px",s.style.height=a+"px"}if(i.scrollX){var r=e.$meems_scrollbar_x,u=e.$meems$elm_size.width,h=e.$meems_content_size.width,c=Math.min(u,h)/h*u,d=-t.offsetLeft/h*u;r.style.left=d+"px",r.style.width=c+"px"}}}function $(e,s){return t.Handler.apply(this,arguments),s=s||{},s.friction=s.friction||100,s.totalMaxTime=s.totalMaxTime||1,s.totalMaxTimesnap=s.totalMaxTimesnap||0,s.paging=s.paging===!0,s.snap=s.snap===!0,s.scrollY=s.scrollY!==!1,s.scrollX=s.scrollX===!0,s.timingFunction=s.timingFunction||"ease-out",s.fadeOutDuration=s.fadeOutDuration||1,s.bouncing=s.bouncing!==!1,s.minDistanceOfDrag=s.minDistanceOfDrag||10,s.axisLock=s.axisLock!==!1,s.disableTouchEvents=s.disableTouchEvents===!0,s.hideScroller=s.hideScroller===!0,e.$meems_content=e.children[0],i(e,s),s.scrollY&&m(e,s),s.scrollX&&p(e,s),this.$elm=e,this.$elm.$meems_handler=this,this.$elm.$meems$elm_size=C(this.$elm),this.$elm.$meems_content_size=C(this.$elm.$meems_content),g.push(this),this}var g=[],b=function(){for(var e=document.body||document.documentElement,t=["transition","MozTransition","WebkitTransition","OTransition"],i=0;t.length>i;++i)if(t[i]in e.style)return t[i];return"transition"}();(function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;t.length>i&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var i=(new Date).getTime(),s=Math.max(0,16-(i-e)),n=window.setTimeout(function(){t(i+s)},s);return e=i+s,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})();var y=0,_=!1,w=function(e,t,i){"number"==typeof t&&(e.$meems_content.style.left=t+"px",e.$meems_content_size.left=t),"number"==typeof i&&(e.$meems_content.style.top=i+"px",e.$meems_content_size.top=i)},C=function(e){return{left:e.offsetLeft,top:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}};return $.updateAll=function(){for(var e,t=0,i=g.length;i>t;++t)e=g[t],e.update()},$.extend(t.Handler,{update:function(){this.$elm.$meems$elm_size=C(this.$elm),this.$elm.$meems_content_size=C(this.$elm.$meems_content),v(this.$elm,this.$elm.$meems_content)},destroy:function(){g.splice(g.indexOf(this),0),s(this.$elm,this.$meems_config)},scrollTo:function(e,t,i){i=i||.25,this.$elm.$meems_config.hideScroller||(this.$elm.$meems_config.scrollY&&(this.$elm.$meems_scrollbar_y.style.display="block"),this.$elm.$meems_config.scrollX&&(this.$elm.$meems_scrollbar_x.style.display="block")),d(this.$elm,-e,i,-t,i)}}),t.Dom.on(document,t.Touch.touchStartEventName,a),t.Dom.on(document,t.Touch.touchEndEventName,o),$}),i("ui/page",["meems-utils","meems-scroll","./widget"],function(e,t,i){function s(){return i.apply(this,arguments),this.facet("header",null),this.facet("content",null),this.facet("footer",null),this.attr("enableScroll",!1),this.$contentWrapper=null,this.$scroller=null,this}return s.extend(i,{scroller:function(){return this.$scroller},update:function(s){this.el()||(this.el(document.createElement("div")),this.el().className="ui-page"),this.facet("header")&&(this.facet("header").update(s),this.facet("header").el().parentNode!==this.el()&&this.el().appendChild(this.facet("header").el())),this.facet("content")&&(this.facet("content").update(s),this.facet("content").el().parentNode&&this.facet("content").el().parentNode===this.$contentWrapper||(this.$contentWrapper=document.createElement("div"),this.$contentWrapper.className="ui-content",this.$contentWrapper.appendChild(this.facet("content").el()),this.el().appendChild(this.$contentWrapper))),this.facet("footer")&&(this.facet("footer").update(s),this.facet("footer").el().parentNode!==this.el()&&this.el().appendChild(this.facet("footer").el())),this.facet("content")&&(this.facet("header")?e.Dom.removeClass(this.$contentWrapper,"ui-header-off"):e.Dom.addClass(this.$contentWrapper,"ui-header-off"),this.facet("footer")?e.Dom.removeClass(this.$contentWrapper,"ui-footer-off"):e.Dom.addClass(this.$contentWrapper,"ui-footer-off")),this.attr("enableScroll")!==!0||this.$scroller||(this.$scroller=new t(this.$contentWrapper,{scrollX:!1,scrollY:!0,disableTouchEvents:!1,hideScroller:!1})),i.prototype.update.apply(this,arguments)}}),s}),function(e,t){"object"==typeof exports&&exports?module.exports=t:"function"==typeof i&&i.amd?i("mustache",t):e.Mustache=t}(this,function(){function e(e,t){return RegExp.prototype.test.call(e,t)}function t(t){return!e(p,t)}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(e){return(e+"").replace(/[&<>"'\/]/g,function(e){return b[e]})}function n(e){this.string=e,this.tail=e,this.pos=0}function l(e,t){this.view=e,this.parent=t,this.clearCache()}function a(){this.clearCache()}function o(e){function t(e,t,s){if(!i[e]){var n=o(t);i[e]=function(e,t){return n(e,t,s)}}return i[e]}var i={};return function(i,s,n){for(var l,a,o="",r=0,u=e.length;u>r;++r)switch(l=e[r],l[0]){case"#":a=n.slice(l[3],l[5]),o+=i._section(l[1],s,a,t(r,l[4],n));break;case"^":o+=i._inverted(l[1],s,t(r,l[4],n));break;case">":o+=i._partial(l[1],s);break;case"&":o+=i._name(l[1],s);break;case"name":o+=i._escaped(l[1],s);break;case"text":o+=l[1]}return o}}function r(e){for(var t,i=[],s=i,n=[],l=0,a=e.length;a>l;++l)switch(t=e[l],t[0]){case"#":case"^":n.push(t),s.push(t),s=t[4]=[];break;case"/":var o=n.pop();o[5]=t[2],s=n.length>0?n[n.length-1][4]:i;break;default:s.push(t)}return i}function u(e){for(var t,i,s=[],n=0,l=e.length;l>n;++n)t=e[n],"text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(i=t,s.push(t));return s}function h(e){return[RegExp(i(e[0])+"\\s*"),RegExp("\\s*"+i(e[1]))]}var c={};c.name="mustache.js",c.version="0.7.2",c.tags=["{{","}}"],c.Scanner=n,c.Context=l,c.Writer=a;var d=/\s*/,m=/\s+/,p=/\S/,f=/\s*=/,v=/\s*\}/,$=/#|\^|\/|>|\{|&|=|!/,g=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};c.escape=s,n.prototype.eos=function(){return""===this.tail},n.prototype.scan=function(e){var t=this.tail.match(e);return t&&0===t.index?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},n.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i),this.pos+=i}return t},l.make=function(e){return e instanceof l?e:new l(e)},l.prototype.clearCache=function(){this._cache={}},l.prototype.push=function(e){return new l(e,this)},l.prototype.lookup=function(e){var t=this._cache[e];if(!t){if("."===e)t=this.view;else for(var i=this;i;){if(e.indexOf(".")>0){var s=e.split("."),n=0;for(t=i.view;t&&s.length>n;)t=t[s[n++]]}else t=i.view[e];if(null!=t)break;i=i.parent}this._cache[e]=t}return"function"==typeof t&&(t=t.call(this.view)),t},a.prototype.clearCache=function(){this._cache={},this._partialCache={}},a.prototype.compile=function(e,t){var i=this._cache[e];if(!i){var s=c.parse(e,t);i=this._cache[e]=this.compileTokens(s,e)}return i},a.prototype.compilePartial=function(e,t,i){var s=this.compile(t,i);return this._partialCache[e]=s,s},a.prototype.compileTokens=function(e,t){var i=o(e),s=this;return function(e,n){if(n)if("function"==typeof n)s._loadPartial=n;else for(var a in n)s.compilePartial(a,n[a]);return i(s,l.make(e),t)}},a.prototype.render=function(e,t,i){return this.compile(e)(t,i)},a.prototype._section=function(e,t,i,s){var n=t.lookup(e);switch(typeof n){case"object":if(g(n)){for(var l="",a=0,o=n.length;o>a;++a)l+=s(this,t.push(n[a]));return l}return n?s(this,t.push(n)):"";case"function":var r=this,u=function(e){return r.render(e,t)},h=n.call(t.view,i,u);return null!=h?h:"";default:if(n)return s(this,t)}return""},a.prototype._inverted=function(e,t,i){var s=t.lookup(e);return!s||g(s)&&0===s.length?i(this,t):""},a.prototype._partial=function(e,t){e in this._partialCache||!this._loadPartial||this.compilePartial(e,this._loadPartial(e));var i=this._partialCache[e];return i?i(t):""},a.prototype._name=function(e,t){var i=t.lookup(e);return"function"==typeof i&&(i=i.call(t.view)),null==i?"":i+""},a.prototype._escaped=function(e,t){return c.escape(this._name(e,t))},c.parse=function(e,s){function l(){if(D&&!E)for(;C.length;)w.splice(C.pop(),1);else C=[];D=!1,E=!1}if(e=e||"",s=s||c.tags,"string"==typeof s&&(s=s.split(m)),2!==s.length)throw Error("Invalid tags: "+s.join(", "));for(var a,o,p,g,b=h(s),y=new n(e),_=[],w=[],C=[],D=!1,E=!1;!y.eos();){if(a=y.pos,p=y.scanUntil(b[0]))for(var x=0,N=p.length;N>x;++x)g=p.charAt(x),t(g)?C.push(w.length):E=!0,w.push(["text",g,a,a+1]),a+=1,"\n"===g&&l();if(a=y.pos,!y.scan(b[0]))break;if(D=!0,o=y.scan($)||"name",y.scan(d),"="===o)p=y.scanUntil(f),y.scan(f),y.scanUntil(b[1]);else if("{"===o){var T=RegExp("\\s*"+i("}"+s[1]));p=y.scanUntil(T),y.scan(v),y.scanUntil(b[1]),o="&"}else p=y.scanUntil(b[1]);if(!y.scan(b[1]))throw Error("Unclosed tag at "+y.pos);if("/"===o){if(0===_.length)throw Error('Unopened section "'+p+'" at '+a);var F=_.pop();if(F[1]!==p)throw Error('Unclosed section "'+F[1]+'" at '+a)}var k=[o,p,a,y.pos];if(w.push(k),"#"===o||"^"===o)_.push(k);else if("name"===o||"{"===o||"&"===o)E=!0;else if("="===o){if(s=p.split(m),2!==s.length)throw Error("Invalid tags at "+a+": "+s.join(", "));b=h(s)}}var F=_.pop();if(F)throw Error('Unclosed section "'+F[1]+'" at '+y.pos);return r(u(w))};var y=new a;return c.clearCache=function(){return y.clearCache()},c.compile=function(e,t){return y.compile(e,t)},c.compilePartial=function(e,t,i){return y.compilePartial(e,t,i)},c.compileTokens=function(e,t){return y.compileTokens(e,t)},c.render=function(e,t,i){return y.render(e,t,i)},c.to_html=function(e,t,i,s){var n=c.render(e,t,i);return"function"!=typeof s?n:(s(n),void 0)},c}()),i("ui/html",["meems-utils","./widget","mustache"],function(e,t,i){function s(){return this._compiledTemplate=i.compile(""),t.apply(this,arguments),this}return s.extend(t,{attr:function(e,s){return void 0!==s&&"html"===e&&(this._compiledTemplate=i.compile(s||"")),t.prototype.attr.apply(this,arguments)},partialUpdate:function(t){"html"!==t&&"data"!==t||!this.el()||e.Dom.setHtml(this.el(),this._compiledTemplate(this.attr("data")))},update:function(){this.el()||(this.el(document.createElement("div")),e.Dom.addClass(this.el(),"ui-html")),e.Dom.setHtml(this.el(),this._compiledTemplate(this.attr("data"))),t.prototype.update.apply(this,arguments)}}),s}),i("ui/button",["meems-utils","./widget"],function(e,t){function i(){return t.apply(this,arguments),this.$iconEl=null,this.$titleEl=null,this}return i.extend(t,{attr:function(i,s){var n="style"===i?t.prototype.attr.call(this,i):null,l=t.prototype.attr.apply(this,arguments);return"style"===i&&void 0!==s&&this.el()&&(n?e.Dom.removeClass(this.el(),"ui-button-"+n):e.Dom.removeClass(this.el(),"ui-button-normal"),s?e.Dom.addClass(this.el(),"ui-button-"+s):e.Dom.addClass(this.el(),"ui-button-normal")),l},partialUpdate:function(t,i,s){"title"===t&&this.$titleEl?(e.Dom.setHtml(this.$titleEl,this.attr("title")),e.Dom.applyChanges()):"style"===t&&this.el()&&(i?e.Dom.removeClass(this.el(),"ui-button-"+i):e.Dom.removeClass(this.el(),"ui-button-normal"),s?e.Dom.addClass(this.el(),"ui-button-"+s):e.Dom.addClass(this.el(),"ui-button-normal"))},update:function(){this.el()||(this.el(document.createElement("div")),this.$iconEl=document.createElement("div"),this.$iconEl.className="ui-icon",this.el().appendChild(this.$iconEl),this.$titleEl=document.createElement("div"),this.$titleEl.className="ui-title",this.el().appendChild(this.$titleEl),e.Dom.addClass(this.el(),"ui-button")),e.Dom.setClass(this.$iconEl,(this.attr("icon")?"ui-icon ui-icon-"+this.attr("icon"):"ui-no-icon")+(this.attr("disabled")===!0?" ui-disabled":"")),e.Dom.setHtml(this.$titleEl,this.attr("title")),this.attr("style",void 0!==this.attr("style")?this.attr("style"):null),t.prototype.update.apply(this,arguments)
}}),i}),i("ui/button_group",["meems-utils","./widget"],function(e,t){function i(){return t.apply(this,arguments),this.$buttons=[],this}var s=function(t,i){for(var s=i.target;s&&(s.className&&-1===s.className.indexOf("ui-button")||!s.className);)s=s.parentNode;if(s){var n=e.Array.indexOfByProp(this.$buttons,"$el",s);n>-1&&this.fire("button:pressed",this.$buttons[n])}},n=function(t){if(this.el())for(var i,n=this.attr("stretch")===!0,l=this.$buttons.length>0?100/this.$buttons.length:0,a=void 0!==this.attr("selected")?this.attr("selected"):-1,o=0;this.$buttons.length>o;++o)i=this.$buttons[o],i.update(t),i.el().parentNode!==this.el()&&(this.el().appendChild(i.el()),i.on("dom:"+(e.Dom.supportsTouch()?"touchstart":"click"),e.Fn.bind(s,this))),i.el().style.width=n?l+"%":"",a===o?e.Dom.addClass(i.el(),"ui-selected"):e.Dom.removeClass(i.el(),"ui-selected")};return i.extend(t,{addButton:function(e){return this.$buttons.push(e),this},buttons:function(e){if(void 0===e)return this.$buttons;if(this.$buttons&&this.$buttons.length>0){var t,i;for(i=0;this.$buttons.length>i;++i)t=this.$buttons[i],t.el()&&t.el().parentNode===this.el()&&this.el().removeChild(t.el())}return this.$buttons=e,n.call(this),this},update:function(i){this.el()||(this.el(document.createElement("div")),e.Dom.addClass(this.el(),"ui-button-group")),n.call(this,i),t.prototype.update.apply(this,arguments)}}),i}),i("ui/list",["meems-utils","meems-events","./widget","./html"],function(e,t,i,s){function n(){return i.apply(this,arguments),this.$header=!1,this.$table=null,this.$leftFacet=null,this.$rightFacet=null,this.$middleFacet=null,this.$orderButton=null,this.$dragging=!1,this.$cursorStartPosition=null,this.$elementStartPosition=null,this.facet("item",null),this.$onItemMoved=e.Fn.bind(o,this),this.$onEndOrdering=e.Fn.bind(r,this),this}function l(){return i.apply(this,arguments),this.$generatedItems=[],this.$items=[],this.$template="{{text}}",this.$headerTemplate="{{text}}",this.$placeHolder=null,this.$selectedItems=[],this.attr("style","normal"),this.attr("sortable",!1),this.attr("selectionMode","single"),this}var a=function(i){if(!this.$dragging){var s=this.el(),n=this.parent(),l=n.el(),a=n.$placeHolder;this.$dragging=!0,t.Dom.on(document,t.Touch.touchMoveEventName,this.$onItemMoved),t.Dom.on(document,t.Touch.touchEndEventName,this.$onEndOrdering),this.$elementStartPosition=e.Dom.getAbsolutePosition(s),s.style.top=this.$elementStartPosition.y+"px";var o=e.Dom.getDimensions(s);return s.style.width=o.width+"px",s.style.height=o.height+"px",a.className=s.className,a.style.width=o.width+"px",a.style.height=o.height+"px",this.$cursorStartPosition=t.Touch.getCursorPosition(i),this.$elementStartPosition=e.Dom.getAbsolutePosition(s),e.Dom.addClass(s,"ui-list-item-drag"),e.Dom.applyChanges(),l.insertBefore(a,s),t.Dom.cancelEvent(i)}},o=function(e){if(this.$dragging){var i,s,n=this.el(),l=this.parent(),a=l.el(),o=l.$placeHolder,r=t.Touch.getCursorPosition(e),u=a.children,h=null;r.y+=this.$elementStartPosition.y-this.$cursorStartPosition.y,n.style.top=r.y+"px";for(var c=r.y+n.offsetHeight/2,d=0,m=u.length;m>d;++d)if(s=u[d],s!==n){if(i=s.offsetHeight,i/2>=c){h=s;break}c-=i}return h===o?t.Dom.cancelEvent(e):(h?a.insertBefore(o,h):a.appendChild(o),void 0)}},r=function(i){if(this.$dragging){var s=this.el(),n=this.parent(),l=n.el(),a=n.$placeHolder;e.Dom.removeClass(s,"ui-list-item-drag"),s.style.top="",s.style.width="",s.style.height="",t.Dom.off(document,t.Touch.touchMoveEventName,this.$onItemMoved),t.Dom.off(document,t.Touch.touchEndEventName,this.$onEndOrdering),e.Dom.applyChanges(),l.replaceChild(s,a);var o=n.$generatedItems.indexOf(this),r=Array.prototype.indexOf.call(l.children,s);e.Array.moveElement(n.$generatedItems,o,r);var u=n.items();return u="function"==typeof u?u():u,e.Array.moveElement(u,o,r),"function"==typeof n.items().notify&&n.items().notify(u,u),this.$dragging=!1,h.call(n),t.Dom.cancelEvent(i)}};n.extend(i,{header:function(t){return void 0===t?this.$header:(this.$header=t,this.el()&&(this.$header?(e.Dom.addClass(this.el(),"ui-list-header"),e.Dom.removeClass(this.el(),"ui-list-item")):(e.Dom.addClass(this.el(),"ui-list-item"),e.Dom.removeClass(this.el(),"ui-list-header"))),this)},update:function(){if(!this.el()){this.el(document.createElement("li")),this.$table=document.createElement("table"),this.$table.className="ui-fill-width",this.$leftFacet=document.createElement("td"),this.$middleFacet=document.createElement("td"),this.$middleFacet.className="ui-fill-width",this.$rightFacet=document.createElement("td");var s=document.createElement("input");s.setAttribute("type","checkbox"),s.className="meems-scroll-skip",t.Dom.on(s,"change",e.Fn.bind(function(){this.parent().fire("item:checked",this,s.checked)},this)),this.$leftFacet.appendChild(s),this.$orderButton=document.createElement("div"),this.$orderButton.className="ui-icon-order meems-scroll-skip",t.Dom.on(this.$orderButton,t.Touch.touchStartEventName,e.Fn.bind(a,this)),this.$rightFacet.appendChild(this.$orderButton);var n=document.createElement("tr");n.appendChild(this.$leftFacet),n.appendChild(this.$middleFacet),n.appendChild(this.$rightFacet),this.$table.appendChild(n),this.el().appendChild(this.$table),this.header(this.$header)}var l="multiple"===this.parent().attr("selectionMode"),o=this.parent().attr("sortable")===!0;this.$leftFacet.style.display=l?"":"none",this.$rightFacet.style.display=o?"":"none",this.facet("item")&&(this.facet("item").update(),this.facet("item").el().parentNode!==this.$middleFacet&&this.$middleFacet.appendChild(this.facet("item").el())),i.prototype.update.apply(this,arguments)}});var u=function(e,t){var i=new n;return i.parent(this),i.header(e.header===!0),i.header()?i.facet("item",(new s).attr("html",this.$headerTemplate).attr("data",e)):i.facet("item",(new s).attr("html",this.$template).attr("data",e)),i.update(),i.el()._meems_parentList=this,i.el()._meems_item_index=t,i.el()._meems_item=e,i},h=function(){var t,i,s;if(this.$generatedItems){for(i=0,s=this.$generatedItems.length;s>i;++i)t=this.$generatedItems[i],t.header()||(s-1>i?this.$generatedItems[i+1].header()?e.Dom.addClass(t.el(),"ui-list-item-last"):e.Dom.removeClass(t.el(),"ui-list-item-last"):e.Dom.addClass(t.el(),"ui-list-item-last"));e.Dom.applyChanges()}},c=function(t,i){if(this.el()){i="function"==typeof i?i():i;var s,n,l,a,o,r,h=this.el(),c={};if(this.$generatedItems)for(l=0,a=this.$generatedItems.length;a>l;++l){s=this.$generatedItems[l];var d=!1;for(o=0,r=i.length;r>o;++o)if(s.el()._meems_item===i[o]){d=!0,c[o]=l,e.Dom.removeClass(s.el(),"ui-list-item-last"),h.removeChild(s.el());break}if(!d&&s.el()&&s.el().parentNode===h){h.removeChild(s.el()),this.$generatedItems.splice(l,1);var m=this.$selectedItems.indexOf(s);m>-1&&this.$selectedItems.splice(m,1),--l,--a}}for(l=0,a=i.length;a>l;++l)n=i[l],void 0===c[l]?(s=u.call(this,n,l,a),this.$generatedItems.splice(l,0,s)):s=this.$generatedItems[c[l]],h.appendChild(s.el()),s.header()||(a-1>l?i[l+1].header===!0?e.Dom.addClass(s.el(),"ui-list-item-last"):e.Dom.removeClass(s.el(),"ui-list-item-last"):e.Dom.addClass(s.el(),"ui-list-item-last"))}},d=function(e,t){for(var i=t.target;i&&void 0===i._meems_item_index;)i=i.parentNode;return i&&this.fire("item:clicked",i._meems_item,t),!0};return l.extend(i,{template:function(e){return void 0===e?this.$template:(this.$template=e,this)},headerTemplate:function(e){return void 0===e?this.$headerTemplate:(this.$headerTemplate=e,this)},items:function(t){return void 0===t?this.$items:(this.$items=t,c.call(this,null,this.$items),"function"==typeof this.$items.subscribe&&this.$items.subscribe(e.Fn.bind(c,this)),this)},attr:function(t,s){var n="style"===t?i.prototype.attr.call(this,t):null,l=i.prototype.attr.apply(this,arguments);return"style"===t&&void 0!==s&&this.el()&&(n&&e.Dom.removeClass(this.el(),"ui-list-"+n),s&&e.Dom.addClass(this.el(),"ui-list-"+s)),l},getSelectedItems:function(){return this.$selectedItems},update:function(s){this.el()||(this.el(document.createElement("ul")),this.el().className="ui-list",this.on("dom:"+t.Touch.touchEndEventName,e.Fn.bind(d,this)),this.$placeHolder=document.createElement("li"),this.$placeHolder.className="ui-list-item ui-list-placeholder",this.on("item:checked",function(e,t,i){i?this.$selectedItems.push(t.el()._meems_item):this.$selectedItems.splice(this.$selectedItems.indexOf(t.el()._meems_item),1),this.fire("selection:changed",this.$selectedItems)})),s!==!0&&(this.attr("style",this.attr("style")),c.call(this,null,this.$items)),i.prototype.update.apply(this,arguments)}}),l}),i("ui/aside",["meems-utils","./widget"],function(e,t){function i(){return t.apply(this,arguments),this.$expanded=!1,this.facet("menu",null),this.facet("content",null),this}return i.extend(t,{expanded:function(t){return void 0===t?this.$expanded:(this.$expanded=t,this.$expanded?(this.facet("menu")&&(e.Dom.addClass(this.facet("menu").el(),"ui-expanded"),e.Dom.removeClass(this.facet("menu").el(),"ui-collapsed")),this.facet("content")&&(e.Dom.addClass(this.facet("content").el(),"ui-expanded"),e.Dom.removeClass(this.facet("content").el(),"ui-collapsed"))):(this.facet("menu")&&(e.Dom.addClass(this.facet("menu").el(),"ui-collapsed"),e.Dom.removeClass(this.facet("menu").el(),"ui-expanded")),this.facet("content")&&(e.Dom.addClass(this.facet("content").el(),"ui-collapsed"),e.Dom.removeClass(this.facet("content").el(),"ui-expanded"))),this)},update:function(i){this.el()||(this.el(document.createElement("div")),e.Dom.addClass(this.el(),"ui-aside")),this.facet("menu")&&(this.facet("menu").update(i),e.Dom.addClass(this.facet("menu").el(),"ui-aside-menu"),this.facet("menu").el().parentNode!==this.el()&&this.el().appendChild(this.facet("menu").el())),this.facet("content")&&(this.facet("content").update(i),e.Dom.addClass(this.facet("content").el(),"ui-aside-content"),this.facet("content").el().parentNode!==this.el()&&(e.Dom.addClass(this.facet("content").el(),"ui-content ui-scroll-y"),this.el().appendChild(this.facet("content").el()))),this.expanded(this.$expanded),t.prototype.update.apply(this,arguments)}}),i}),i("ui/split_view",["meems-utils","./widget"],function(e,t){function i(){return t.apply(this,arguments),this.attr("layout","horizontal"),this.facet("first",null),this.facet("second",null),this}return i.extend(t,{attr:function(i,s){var n="layout"===i?t.prototype.attr.call(this,i):null,l=t.prototype.attr.apply(this,arguments);return"layout"===i&&void 0!==s&&this.el()&&(n&&e.Dom.removeClass(this.el(),"ui-"+n),s&&e.Dom.addClass(this.el(),"ui-"+s)),l},update:function(e){this.el()||(this.el(document.createElement("div")),this.el().className="ui-splitview",this.attr("layout",this.attr("layout"))),this.facet("first")&&(this.facet("first").update(e),this.facet("first").el().parentNode!==this.el()&&this.el().appendChild(this.facet("first").el())),this.facet("second")&&(this.facet("second").update(e),this.facet("second").el().parentNode!==this.el()&&this.el().appendChild(this.facet("second").el())),t.prototype.update.apply(this,arguments)}}),i}),i("ui/tab",["meems-utils","meems-scroll","./widget"],function(e,t,i){function s(){return i.apply(this,arguments),this.$scroller=null,this.$holder=null,this.facet("content",null),this}return s.extend(i,{update:function(e){this.el()||(this.el(document.createElement("div")),this.el().className="ui-tab");var s=this.facet("content");s&&(s.update(e),this.$holder||(this.$holder=document.createElement("div"),this.$holder.className="ui-fill-width",this.el().appendChild(this.$holder)),s.el().parentNode!==this.$holder&&(this.$holder.appendChild(s.el()),this.$scroller&&this.$scroller.destroy(),this.$scroller=new t(this.el(),{scrollX:!1,scrollY:!0}))),i.prototype.update.apply(this,arguments)}}),s}),i("ui/tab_group",["meems-utils","meems-scroll","./widget","./tab","./button_group","./button"],function(e,t,i,s,n,l){function a(){return i.apply(this,arguments),this.$tabs=[],this.$visibleTab=0,this.$scroller=null,this.$tabHolder=null,this.$buttonGroup=null,this}var o=function(t,i){for(var s=i.target;s&&-1===s.className.indexOf("ui-button");)s=s.parentNode;if(s){var n=e.Array.indexOfByProp(this.$buttonGroup.buttons,"$el",s);n>-1&&this.visibleTab(n)}},r=function(t,i){var s=Math.round(i/this.el().offsetWidth);this.visibleTab(s),this.update(),e.Dom.applyChanges()};return a.extend(i,{addTab:function(e){return this.$tabs.push(e),this},visibleTab:function(e){return void 0===e?this.$visibleTab:0>e||e>=this.$tabs.length?this:(e!==this.$visibleTab&&this.$scroller&&(this.$scroller.scrollTo(e*this.el().offsetWidth),this.$visibleTab=e),this)},tabs:function(){return this.$tabs},partialUpdate:function(t,i,s){"tabPosition"===t&&this.el()&&(e.Dom.removeClass(this.el(),"ui-tab-buttons-"+i),e.Dom.addClass(this.el(),"ui-tab-buttons-"+s))},update:function(s){if(!this.el()){this.el(document.createElement("div")),this.el().className="ui-tab-group",this.$tabHolder=document.createElement("div"),this.$helperHolder=document.createElement("div"),this.$buttonGroup=document.createElement("div"),this.$tabHolder.className="ui-fill",this.$helperHolder.className="ui-tab-holder ui-fill",this.$buttonGroup.className="ui-tab-buttons",this.$buttonGroup.buttons=[],this.$helperHolder.appendChild(this.$tabHolder),this.el().appendChild(this.$helperHolder);var n=this.attr("tabPosition")||"top";this.el().className+="top"===n?" ui-tab-buttons-top":" ui-tab-buttons-bottom",this.el().appendChild(this.$buttonGroup)}if(this.$tabs.length>0){var a,u,h=100/this.$tabs.length;this.$tabHolder.style.width=100*this.$tabs.length+"%";for(var c=0,d=this.$tabs.length;d>c;++c)a=this.$tabs[c],a.update(s),a.el().parentNode!==this.$tabHolder&&(a.el().style.position="absolute",a.el().style.left=c*h+"%",a.el().style.top="0",a.el().style.width=h+"%",a.el().style.bottom="0",this.$tabHolder.appendChild(a.el()),u=(new l).attr("style","vertical"),u.update(s),u.on("dom:"+(e.Dom.supportsTouch()?"touchstart":"click"),e.Fn.bind(o,this)),this.$buttonGroup.appendChild(u.el()),this.$buttonGroup.buttons.push(u)),u=u||this.$buttonGroup.buttons[c],u.attr("title",a.attr("title")).attr("icon",a.attr("icon")).attr("disabled",this.$visibleTab!==c),u.update(s),u.el().style.width=h+"%",c===this.$visibleTab?e.Dom.addClass(u.el(),"ui-selected"):e.Dom.removeClass(u.el(),"ui-selected"),u=null;e.Dom.addClass(this.$tabHolder,"ui-footer-on"),this.$scroller||(this.$scroller=new t(this.$helperHolder,{scrollX:!0,scrollY:!1,bouncing:!1,paging:!0,totalMaxTime:.25,disableTouchEvents:!1,hideScroller:!0}).on("scroll:end",e.Fn.bind(r,this)))}else e.Dom.addClass(this.$tabHolder,"ui-footer-off");i.prototype.update.apply(this,arguments)}}),a}),i("ui/form",["meems-utils","./widget"],function(e,t){function i(){return t.apply(this,arguments),this.$titleEl=null,this.$holder=null,this.$fields=[],this}return i.extend(t,{addField:function(e){return this.$fields.push(e),this},fields:function(e){return void 0===e?this.$fields:(this.$fields=e,this)},partialUpdate:function(t,i,s){"action"===t&&this.el()?this.el().setAttribute("action",s||"#"):"title"===t&&this.$titleEl&&(e.Dom.setHtml(this.$titleEl,s),s.length>0?(e.Dom.addClass(this.$titleEl,"ui-show"),e.Dom.removeClass(this.$titleEl,"ui-hide")):(e.Dom.addClass(this.$titleEl,"ui-hide"),e.Dom.removeClass(this.$titleEl,"ui-show")))},update:function(i){this.el()||(this.el(document.createElement("form")),this.el().className="ui-form",this.el().setAttribute("action",this.attr("action")||"#"),this.$titleEl=document.createElement("div"),this.$titleEl.className="ui-title",this.el().appendChild(this.$titleEl),this.$holder=document.createElement("div"),this.$holder.className="ui-form-fields",this.el().appendChild(this.$holder));var s=this.attr("title")||"";e.Dom.setHtml(this.$titleEl,s),s.length>0?(e.Dom.addClass(this.$titleEl,"ui-show"),e.Dom.removeClass(this.$titleEl,"ui-hide")):(e.Dom.addClass(this.$titleEl,"ui-hide"),e.Dom.removeClass(this.$titleEl,"ui-show"));for(var n,l=0;this.$fields.length>l;++l)n=this.$fields[l],n.update(i),n.el().parentNode!==this.$holder&&this.$holder.appendChild(n.el());t.prototype.update.apply(this,arguments)}}),i}),i("ui/textfield",["meems-utils","meems-events","./widget"],function(e,t,i){function s(){return this.$input=null,this.$label=null,this.$value=null,i.apply(this,arguments),this}var n=function(e,t){this.$input&&(this.$input.value=t)};return s.extend(i,{value:function(e){return void 0===e?"function"==typeof this.$value?this.$value:this.$input.value:(this.$value=e,n.call(this,null,e),this)},partialUpdate:function(t,i,s){"label"===t&&this.$label&&e.Dom.setHtml(this.$label,s||"")},update:function(){if(!this.el()){this.el(document.createElement("div")),this.$label=document.createElement("label"),this.$input=document.createElement("input"),this.$input.setAttribute("type",this.attr("type")||"text"),this.el().appendChild(this.$label);var s=document.createElement("div");s.appendChild(this.$input),this.el().appendChild(s),this.el().className="ui-textfield",t.Dom.on(this.$input,"change",e.Fn.bind(function(){"function"==typeof this.$value&&this.$value(this.$input.value)},this)),"function"==typeof this.$value&&"subscribe"in this.$value&&this.$value.subscribe(n)}e.Dom.setHtml(this.$label,this.attr("label")||""),i.prototype.update.apply(this,arguments)}}),s}),i("ui/page_holder",["meems-utils","./widget","./page"],function(e,t){function i(){return t.apply(this,arguments),this.$pages=[],this.$currentPage=null,this}return i.extend(t,{pages:function(e){if(void 0===e)return this.$pages;var t,i,s;if(this.$pages)for(i=0,s=this.$pages.length;s>i;++i)t=this.$pages[i],t.el()&&t.el().parentNode===this.el()&&this.el().removeChild(t.el());if(this.$pages=e,this.$pages)for(i=0,s=this.$pages.length;s>i;++i)t=this.$pages[i],t.el()&&t.el().parentNode!==this.el()&&this.el().appendChild(t.el());return this},currentPage:function(t){return void 0===t?this.$currentPage:(this.$currentPage&&(e.Dom.removeClass(this.$currentPage.el(),"ui-show"),e.Dom.addClass(this.$currentPage.el(),"ui-hide")),this.$currentPage=t,this.$currentPage&&(e.Dom.removeClass(this.$currentPage.el(),"ui-hide"),e.Dom.addClass(this.$currentPage.el(),"ui-show")),this)},update:function(i){if(this.el()||(this.el(document.createElement("div")),this.el().className="ui-page-holder"),this.$pages)for(var s,n=0,l=this.$pages.length;l>n;++n)s=this.$pages[n],s.update(i),s.el()&&s.el().parentNode!==this.el()&&this.el().appendChild(s.el()),this.$currentPage||(this.$currentPage=s),s.el()&&(this.$currentPage===s?(e.Dom.removeClass(this.$currentPage.el(),"ui-hide"),e.Dom.addClass(this.$currentPage.el(),"ui-show")):(e.Dom.addClass(s.el(),"ui-hide"),e.Dom.removeClass(s.el(),"ui-show")));t.prototype.update.apply(this,arguments)}}),i}),i("ui/group",["meems-utils","./widget"],function(e,t){function i(){return t.apply(this,arguments),this.$children=[],this}return i.extend(t,{children:function(e){if(void 0===e)return this.$children;var t,i,s;if(this.$children)for(i=0,s=this.$children.length;s>i;++i)t=this.$children[i],t.el().parentNode===this.el()&&this.el().removeChild(t.el());this.$children=e;for(var i=0,s=this.$children.length;s>i;++i)t=this.$children[i],t.el()&&t.el().parentNode!==this.el()&&this.el().appendChild(t.el());return this},appendChild:function(e){return this.$children.push(e),this.el()&&e.el()&&e.el().parentNode!==this.el()&&this.el().appendChild(e.el()),this},removeChild:function(t){return e.Array.remove(this.$children,t),this.el()&&t.el()&&t.el().parentNode===this.el()&&this.el().removeChild(t.el()),this},update:function(e){this.el()||(this.el(document.createElement("div")),this.el().className="ui-group");for(var i,s=0,n=this.$children.length;n>s;++s)i=this.$children[s],i.update(e),i.el().parentNode!==this.el()&&this.el().appendChild(i.el());t.prototype.update.apply(this,arguments)}}),i}),i("ui/switch",["meems-utils","meems-events","./widget"],function(e,t,i){function s(){return this.$input=null,this.$label=null,this.$value=!1,i.apply(this,arguments),this}var n=function(e,t){var i="function"==typeof t?t():t;this.$input&&(this.$input.checked=i)};return s.extend(i,{value:function(e){return void 0===e?this.$value:(n.call(this,this.$value,e),this.$value=e,this)},partialUpdate:function(t,i,s){"label"===t&&this.$label&&e.Dom.setHtml(this.$label,s||"")},update:function(){if(!this.el()){this.el(document.createElement("div")),this.$label=document.createElement("label"),this.$input=document.createElement("input"),this.$inputLabel=document.createElement("label"),this.$inputLabel.appendChild(document.createElement("b")),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("checked","checkbox");var s=document.createElement("div");n.call(this,null,this.$value),s.appendChild(this.$input),s.appendChild(this.$inputLabel),this.el().appendChild(this.$label),this.el().appendChild(s),this.el().className="ui-switch",t.Dom.on(s,t.Touch.touchEndEventName,e.Fn.bind(function(){if("function"==typeof this.$value){var t=!this.$value();this.$input.checked=t,this.$value(t)}else n.call(this,this.$value,!this.$value),this.$value=!this.$value,this.$input.checked=this.$value;e.Dom.applyChanges()},this)),"function"==typeof this.$value&&"subscribe"in this.$value&&this.$value.subscribe(e.Fn.bind(n,this))}e.Dom.setHtml(this.$label,this.attr("label")||""),i.prototype.update.apply(this,arguments)}}),s}),i("ui/slider",["meems-utils","meems-events","./widget"],function(e,t,i){function s(){return this.$input=null,this.$label=null,this.$value=!1,i.apply(this,arguments),this}var n=function(e,t){var i="function"==typeof t?t():t;if(this.$input){var s=this.attr("minimum")||0,n=this.attr("maximum")||100,l=100*Math.max(Math.min((i-s)/(n-s),1),0);this.$inputBar.style.width=l+"%",this.$inputHandle.style.left=l+"%"}},l=function(i){this.$meems_ui_slider_move&&t.Dom.off(this.$input,t.Touch.touchMoveEventName,this.$meems_ui_slider_move),this.$meems_ui_slider_end&&t.Dom.off(this.$input,t.Touch.touchEndEventName,this.$meems_ui_slider_end),this.$meems_ui_slider_start_pos=t.Touch.getCursorPosition(i),this.$meems_ui_slider_pos=e.Dom.getPosition(this.$input),this.$meems_ui_slider_size=e.Dom.getDimensions(this.$input);var s=this.$meems_ui_slider_start_pos.x-this.$meems_ui_slider_pos.x,l=Math.min(Math.max(s/this.$meems_ui_slider_size.width,0),1),r=this.attr("minimum")||0,u=this.attr("maximum")||100;return l=l*(u-r)+r,"function"==typeof this.$value?this.$value(l):(this.$value=l,n.call(this,null,l)),this.$meems_ui_slider_move=e.Fn.bind(a,this),this.$meems_ui_slider_end=e.Fn.bind(o,this),t.Dom.on(this.$input,t.Touch.touchMoveEventName,this.$meems_ui_slider_move),t.Dom.on(this.$input,t.Touch.touchEndEventName,this.$meems_ui_slider_end),e.Dom.applyChanges(),t.Dom.cancelEvent(i)},a=function(e){var i=t.Touch.getCursorPosition(e),s=i.x-this.$meems_ui_slider_pos.x,l=Math.min(Math.max(s/this.$meems_ui_slider_size.width,0),1),a=this.attr("minimum")||0,o=this.attr("maximum")||100;return l=l*(o-a)+a,"function"==typeof this.$value?this.$value(l):(this.$value=l,n.call(this,null,l)),t.Dom.cancelEvent(e)},o=function(){t.Dom.off(this.$input,t.Touch.touchMoveEventName,this.$meems_ui_slider_move),t.Dom.off(this.$input,t.Touch.touchEndEventName,this.$meems_ui_slider_end),this.$meems_ui_slider_end=null,this.$meems_ui_slider_move=null};return s.extend(i,{value:function(e){return void 0===e?this.$value:(n.call(this,this.$value,e),this.$value=e,this)},partialUpdate:function(t,i,s){"label"===t&&this.$label&&e.Dom.setHtml(this.$label,s||"")},update:function(){this.el()||(this.el(document.createElement("div")),this.$label=document.createElement("label"),this.$inputBar=document.createElement("div"),this.$inputBar.className="ui-bar",this.$inputHandle=document.createElement("div"),this.$inputHandle.className="ui-handle",this.$input=document.createElement("div"),n.call(this,null,this.$value),this.$input.appendChild(this.$inputBar),this.$input.appendChild(this.$inputHandle),this.el().appendChild(this.$label),this.el().appendChild(this.$input),this.el().className="ui-slider",t.Dom.on(this.$input,t.Touch.touchStartEventName,e.Fn.bind(l,this)),"function"==typeof this.$value&&"subscribe"in this.$value&&this.$value.subscribe(e.Fn.bind(n,this))),e.Dom.setHtml(this.$label,this.attr("label")||""),i.prototype.update.apply(this,arguments)}}),s}),i("meems-ui",["./observable","./ui/widget","./ui/header","./ui/footer","./ui/page","./ui/html","./ui/button","./ui/button_group","./ui/list","./ui/aside","./ui/split_view","./ui/tab_group","./ui/tab","./ui/form","./ui/textfield","./ui/page_holder","./ui/group","./ui/switch","./ui/slider"],function(e,t,i,s,n,l,a,o,r,u,h,c,d,m,p,f,v,$,g){var b={header:i,footer:s,page:n,html:l,button:a,buttongroup:o,list:r,aside:u,splitview:h,tabgroup:c,tab:d,form:m,textfield:p,pageholder:f,group:v,"switch":$,slider:g},y={create:function(e,t){var i=b[e]?new b[e]:null;return i&&t&&i.parent(t),i}};return y}),i("meems",["./observable","./meems-ui","meems-events","meems-utils","meems-scroll"],function(e,t,i,s,n){var l={Observable:e,UI:t,Events:i,Utils:s,Scroll:n};return l}),t("meems")}),n("view/feeds",["meems"],function(e){function t(e){var t='<div class="feed"><div class="icon"><img src="{{icon}}"></div><div class="name">{{title}}</div><div class="clear"></div></div>',a=l.observableArray([]),o="Feeds",r=i.create("list").items(a).template(t).attr("style","normal").attr("sortable",!0).attr("selectionMode","multiple").on("item:clicked",function(){return!0}).on("selection:changed",function(e,t){t.length>0?g.facet("footer",u).update(!0):g.facet("footer",null).update(!0),s.Dom.applyChanges()}),u=i.create("footer").facet("buttons",i.create("buttongroup").buttons([i.create("button").attr("action","delete").attr("style","icon").attr("title","Delete").attr("icon","delete")]).on("button:pressed",function(e,t){var i=t.attr("action");"delete"===i&&(a.removeAll(r.getSelectedItems()),r.update(),s.Dom.applyChanges())})),h=i.create("pageholder",e),c=i.create("page",h).attr("enableScroll",!0).facet("header",i.create("header").attr("title",o).facet("buttonsright",i.create("buttongroup").addButton(i.create("button").attr("title","Manage").attr("icon","add").on("dom:"+n.Touch.touchEndEventName,function(){h.currentPage(g),s.Dom.applyChanges()})))).facet("content",i.create("list").items(a).template(t).attr("style","normal").on("item:clicked",function(e,t){return h.fire("feeds:clicked",t),!0})),d=l.observable(""),m=l.observable(!1),p=l.observable(!0),f=l.observable(!1),v=l.observable(50),$=l.observable(125),g=i.create("page",h).attr("enableScroll",!0).facet("header",i.create("header").attr("title",o).facet("buttonsleft",i.create("buttongroup").addButton(i.create("button").attr("title","Back").attr("icon","back").on("dom:"+n.Touch.touchEndEventName,function(){h.currentPage(c),s.Dom.applyChanges()})))).facet("content",i.create("group").attr("customClass","ui-align-right").appendChild(i.create("form").addField(i.create("textfield").attr("label","URL").value(d)).addField(i.create("switch").attr("label","demo").value(m)).addField(i.create("switch").attr("label","demo 2").value(p)).addField(i.create("switch").attr("label","demo 3").value(f)).addField(i.create("slider").attr("label","Volume").value(v).attr("minimum",0).attr("maximum",100)).addField(i.create("slider").attr("label","Volume").value($).attr("minimum",100).attr("maximum",200))).appendChild(i.create("button").attr("title","Add").on("dom:"+n.Touch.touchEndEventName,function(){var e=d();e.length>0&&(g.fire("feeds:add",e),d(""))})).appendChild(r));return h.pages([c,g]),this.ui=h,this.feeds=a,this}var i=e.UI,s=e.Utils,n=e.Events,l=e.Observable;return t}),n("view/news",["meems"],function(e){function t(e){var t='<div class="news"><div class="title">{{title}}</div><div class="summary">{{&summary.content}}</div><div class="clear"></div></div>',l=n.observableArray([]),a=n.observable("News"),o=i.create("page",e).attr("enableScroll",!0).facet("header",i.create("header").attr("title",a).facet("buttonsleft",i.create("buttongroup").addButton(i.create("button").attr("title","Feeds").attr("icon","explore").on("dom:"+s.Touch.touchEndEventName,function(){o.fire("aside:toggle")})))).facet("content",i.create("list").items(l).template(t).attr("style","normal").attr("sortable",!0).on("item:clicked",function(e,t){return o.fire("news:clicked",t),!0}));return this.ui=o,this.title=a,this.news=l,this}var i=e.UI,s=(e.Utils,e.Events),n=e.Observable;return t}),n("view/newsdetail",["meems"],function(e){function t(e){var t='<iframe class="news-details" src="{{link.href}}"></iframe>',l=n.observable(),a=n.observable("Feed title"),o=i.create("page",e).attr("enableScroll",!1).facet("header",i.create("header").attr("title",a).facet("buttonsleft",i.create("buttongroup").addButton(i.create("button").attr("title","News").attr("icon","explore").on("dom:"+s.Touch.touchEndEventName,function(){e.fire("goto:news")})))).facet("content",i.create("html").attr("customClass","ui-fill").attr("html",t).attr("data",l));return this.ui=o,this.title=a,this.news=l,this}var i=e.UI,s=e.Events,n=e.Observable;return t}),n("view/phone",["meems","view/feeds","view/news","view/newsdetail"],function(e,t,i,s){function n(){var e=o.observable("RSS Reader"),n=l.create("aside"),r=l.create("pageholder"),u=new t(n);u.ui.on("feeds:clicked",function(e,t){return n.fire("aside:clicked",t),n.expanded(!1),a.Dom.applyChanges(),!0});var h=new i(r),c=new s(r);return r.pages([h.ui,c.ui]),n.facet("content",r).facet("menu",u.ui),r.on("aside:toggle",function(){n.expanded(!n.expanded()),a.Dom.applyChanges()}),this.ui=n,this.title=e,this.pageFeeds=u,this.pageNews=h,this.pageHolder=r,this.pageDetails=c,this}var l=e.UI,a=e.Utils,o=e.Observable;return n.prototype={refresh:function(){this.ui.update(),a.Dom.applyChanges()}},n}),n("viewmodel/newsdetail",[],function(){return{news:{id:null,title:null,author:null,date:null,email:null,icon:null,body:null},showNewsDetails:function(e){this.news=e,this.view.title(this.news.title),this.view.news(this.news)},view:null,parentController:null,init:function(e,t){this.parentController=e,this.view=t||this.view,this.view.news(this.news)}}}),n("viewmodel/news",["viewmodel/newsdetail"],function(e){return{news:[],showNews:function(e,t){this.news=t,this.view.title(e.title),this.view.news(this.news)},parentController:null,view:null,init:function(t,i){this.parentController=t,this.view=i||this.view;var s=this;this.view.ui.on("news:clicked",function(t,i){e.showNewsDetails(i),s.parentController.navigateTo("details")}),this.view.news(this.news)}}}),n("viewmodel/feeds",["viewmodel/news"],function(e){var t={};return{feeds:null,newsCache:{},loadFeeds:function(){if(window.localStorage){var e=window.localStorage.getItem("feeds");e?this.feeds(JSON.parse(e)):this.feeds([])}},saveFeeds:function(){if(window.localStorage){var e=JSON.stringify(this.feeds());window.localStorage.setItem("feeds",e)}},onFeedLoad:function(e){var i=e.query.meta.url.id||"";if(void 0!==t[i]){var s=e.query.results.feed.title,n=e.query.results.feed.date,l=e.query.results.feed.entry,a=t[i];t[i]=null,a&&setTimeout(function(){a(i,n,l,s)},0)}else console.warn("[onFeedLoad] Received feed info but there is no one to collect! "+i)},getNewsFromFeed:function(e,i){var s="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20feednormalizer%20where%20url%3D'"+encodeURIComponent(e.url)+"'%20and%20output%3D'atom_1.0'&format=json&diagnostics=true&callback=onFeedLoad";t[e.url]=i;var n=document.createElement("script");n.src=s,document.getElementsByTagName("head")[0].appendChild(n)},parentController:null,view:null,init:function(t,i){this.parentController=t,this.view=i||this.view,this.feeds=this.view.feeds;var s=this;this.view.ui.on("feeds:clicked",function(t,i){var n=s.newsCache[i.url];n&&n.news&&n.news.length>0&&n.lastUpdateDate&&3e5>n.lastUpdateDate.getTime()-(new Date).getTime()?e.showNews(i,n.news):s.getNewsFromFeed(i,function(t,n,l,a){s.newsCache[i.url]={title:a,news:l,lastUpdateDate:new Date(n)},e.showNews(i,l),s.parentController.updateUi()}),s.parentController.navigateTo("news")}).on("feeds:add",function(e,t){var i=function(e,t,i,n){s.feeds.push({id:1e6*Math.random(),title:n,url:e,unread:0,read:{}}),i&&t&&(s.newsCache[e]={title:n,news:i,lastUpdateDate:new Date(t)}),s.parentController.updateUi()
},n=s.newsCache[t];n&&n.news&&n.news.length>0?i(t,null,null,n.title):s.getNewsFromFeed({url:t},i)}),this.loadFeeds(),0==this.feeds().length&&this.feeds([{id:1,title:"Pblico",url:"http://feeds.feedburner.com/PublicoRSS",unread:0,read:{}},{id:2,title:"RTP Notcias / Geral / ltimas",url:"http://www.rtp.pt/noticias/index.php?headline=204&visual=58",unread:0,read:{}}]);var s=this;this.feeds.subscribe(function(){s.saveFeeds()}),window.onFeedLoad=this.onFeedLoad}}}),n("viewmodel/phone",["meems","viewmodel/feeds","viewmodel/news","viewmodel/newsdetail"],function(e,t,i,s){var n=e.Utils,l={navigateTo:function(e){"details"===e?this.view.pageHolder.currentPage(this.view.pageDetails.ui):"news"===e&&this.view.pageHolder.currentPage(this.view.pageNews.ui),n.Dom.applyChanges()},updateUi:function(){n.Dom.applyChanges()},view:null,init:function(e){this.view=e||this.view,t.init(this,this.view.pageFeeds),i.init(this,this.view.pageNews),s.init(this,this.view.pageDetails);var n=this,l=this.view.pageHolder;l.on("goto:news",function(){n.navigateTo("news")}),l.on("goto:details",function(){n.navigateTo("details")})}};return l}),s.config({paths:{meems:"./lib/meems.min",view:"./view",viewmodel:"./viewmodel"}});var l="css/meems/",a=t()||"android";return e([l+a+"/ui.css",l+a+"/icons.css",l+a+"/effects.css"]),s(["meems","view/phone","viewmodel/phone"],function(e,t,i){var s=e.Utils,n=e.Scroll,l=e.Events,a=new t;i.init(a),a.refresh(),l.Dom.on(window,"resize",s.Fn.throttle(n.updateAll,100)),document.body.appendChild(a.ui.el()),n.updateAll()}),n("js/index",function(){}),s("js/index")});